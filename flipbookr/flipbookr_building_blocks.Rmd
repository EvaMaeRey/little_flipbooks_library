---
title: "flipbookr building blocks"
subtitle: "what lies beneath"
author: "Gina Reynolds, December 2019"
output:
  xaringan::moon_reader:
    lib_dir: libs
    css: ["xaringan-themer.css", ninjutsu]
    nature:
      ratio: 16:10
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r setup}
library(flipbookr)
library(tidyverse)
knitr::opts_chunk$set(fig.width = 6, message = F, warning = F, comment = "", cache = F)
```

```{r xaringan_look}
xaringanthemer::mono_accent(
  code_highlight_color = "rgba(255, 211, 0, .35)",
  base_color = "#03418A")
```




---



We'll use the tidyverse packages to create a pipeline, and flipbookr to walk through the steps in this pipeline.

```{r}
library(tidyverse)
library(flipbookr)
```

The input code to be "flipbookified" is below:

```{r cars_plot, echo = T, eval = F, fig.height=5}
cars %>%  #REVEAL          
  ggplot() +  
  aes(x = speed) + 
  aes(color = speed) + #REVEAL2
  geom_rug() #REVEAL
```


---

Let's first look at the result of using flipbookr to bring this code.

---

`r reveal("cars_plot")`



---

Now, lets look at some of the functions working in the background.


---

`r reveal("code_parsing_and_calculations")`


```{r, code_parsing_and_calculations, echo = F, eval = F}
# The name of the code chunk containing code to be flipped
"cars_plot" %>% 
  # return the code as text
  chunk_code_get() %>% 
  # parse that code into code, pipes, comments, etc
  code_parse() %>% 
  # calculate which lines to show for each frame
  parsed_calc_show(break_type = "user") %>% 
  # calculate highlighting that is needed for each frame
  shown_lines_calc_highlight(break_type = "user")
```


---

`r reveal("partial_code")`


```{r partial_code, echo = F, eval = F}
# from the parsed code 
# and using calc for which lines to display ...
"cars_plot" %>% 
  chunk_code_get() %>% 
  code_parse() %>% #REVEAL
  # ... return the code needed for each slide ...
  parsed_return_partial_code_sequence() -> #REVEAL
# ... save this list
code_seq #REVEAL
```





---


# Deliver the code into a presentation tool.  

We are using Xaringan, so we create a template for code chunks.

```{r xaringan_slides}
return_partial_chunks_template()
```

---

# The generic template above...



---

## ... is used to create chunks of code and output displayed side-by-side

```{r}
return_partial_side_by_side_code_output_chunks(chunk_name = "cars_plot", num_breaks = 2)
```


---

## ... or a series of slides that *just* display output or *just* code 


```{r}
return_partial_code_or_output_chunks(chunk_name = "cars_plot", num_breaks = 2)
```


---




```{css, eval = TRUE, echo = F}
.remark-code{line-height: 1.5; font-size: 60%}
```