<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>flipbookr building blocks</title>
    <meta charset="utf-8" />
    <meta name="author" content="Gina Reynolds, December 2019" />
    <link href="libs/remark-css-0.0.1/ninjutsu.css" rel="stylesheet" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# flipbookr building blocks
## what lies beneath
### Gina Reynolds, December 2019

---



```r
library(flipbookr)
library(tidyverse)
```

```
## ── Attaching packages ─────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse 1.2.1 ──
```

```
## ✓ ggplot2 3.2.1     ✓ purrr   0.3.3
## ✓ tibble  2.1.3     ✓ dplyr   0.8.3
## ✓ tidyr   1.0.0     ✓ stringr 1.4.0
## ✓ readr   1.3.1     ✓ forcats 0.4.0
```

```
## ── Conflicts ────────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()
```

```r
knitr::opts_chunk$set(fig.width = 6, message = F, warning = F, comment = "", cache = F)
```


```r
xaringanthemer::mono_accent(
  code_highlight_color = "rgba(255, 211, 0, .35)",
  base_color = "#03418A")
```

```
[1] "xaringan-themer.css"
```




---



We'll use the tidyverse packages to create a pipeline, and flipbookr to walk through the steps in this pipeline.


```r
library(tidyverse)
```



```r
flipbookr::code_parse
```

```
function (code) 
{
    raw_code_table &lt;- tibble::tibble(raw_code = stringr::str_split(code, 
        "\n")[[1]]) %&gt;% dplyr::mutate(line = 1:dplyr::n())
    sf &lt;- srcfile(code)
    try(parse(text = code, srcfile = sf))
    utils::getParseData(sf) %&gt;% dplyr::rename(line = line1) %&gt;% 
        dplyr::mutate(open_par = text == "(") %&gt;% dplyr::mutate(closed_par = text == 
        ")") %&gt;% dplyr::mutate(open_curly = text == "{") %&gt;% 
        dplyr::mutate(closed_curly = text == "}") %&gt;% dplyr::mutate(open_square = text == 
        "[") %&gt;% dplyr::mutate(open_square = ifelse(text == "[[", 
        2, open_square)) %&gt;% dplyr::mutate(closed_square = text == 
        "]") %&gt;% dplyr::group_by(line) %&gt;% dplyr::summarise(full_line = paste0(text, 
        collapse = ""), comment = stringr::str_trim(paste0(ifelse(token == 
        "COMMENT", text, ""), collapse = " ")), num_open_par = sum(open_par), 
        num_closed_par = sum(closed_par), num_open_curly = sum(open_curly), 
        num_closed_curly = sum(closed_curly), num_open_square = sum(open_square), 
        num_closed_square = sum(closed_square)) %&gt;% dplyr::left_join(raw_code_table) %&gt;% 
        dplyr::mutate(code = ifelse(comment != "", stringr::str_remove(raw_code, 
            comment), raw_code)) %&gt;% dplyr::mutate(connector = stringr::str_extract(stringr::str_trim(code), 
        "%&gt;%$|\\+$|-&gt;$|%\\+%")) %&gt;% dplyr::mutate(connector = tidyr::replace_na(connector, 
        "")) %&gt;% dplyr::mutate(non_seq = stringr::str_extract(comment, 
        "#REVEAL-?\\d+")) %&gt;% dplyr::mutate(non_seq = stringr::str_extract(non_seq, 
        "-?\\d+")) %&gt;% dplyr::mutate(non_seq = as.numeric(non_seq)) %&gt;% 
        dplyr::mutate(non_seq = tidyr::replace_na(non_seq, 1)) %&gt;% 
        dplyr::mutate(comment = stringr::str_remove(comment, 
            "#REVEAL\\d+")) %&gt;% dplyr::mutate(user = stringr::str_detect(comment, 
        "#REVEAL")) %&gt;% dplyr::mutate(comment = stringr::str_remove(comment, 
        "#REVEAL")) %&gt;% dplyr::mutate(code = stringr::str_remove(stringi::stri_trim_right(code), 
        "%&gt;%$|\\+$|-&gt;$|%\\+%")) %&gt;% dplyr::mutate(balanced_paren = (cumsum(num_open_par) - 
        cumsum(num_closed_par)) == 0) %&gt;% dplyr::mutate(balanced_curly = (cumsum(num_open_curly) - 
        cumsum(num_closed_curly)) == 0) %&gt;% dplyr::mutate(balanced_square = (cumsum(num_open_square) - 
        cumsum(num_closed_square)) == 0) %&gt;% dplyr::mutate(auto = balanced_paren &amp; 
        balanced_curly &amp; balanced_square &amp; code != "") %&gt;% dplyr::select(line, 
        raw_code, code, connector, comment, auto, user, non_seq)
}
&lt;bytecode: 0x7ffa551ef990&gt;
&lt;environment: namespace:flipbookr&gt;
```

---

class: split-40
count: false
.column[.content[

```r
*flipbookr:::create_code()
```
]]
.column[.content[

```
[1] "cars %&gt;%             # the data  #REVEAL\n  filter(speed &gt; 4) %&gt;%  # subset\n  ggplot() +              # pipe to ggplot\n  aes(x = speed) +\n  aes(y = dist) +\n  # Describing what follows\n  geom_point(alpha = .3) + #REVEAL\n  geom_point(alpha = 1) + #REVEAL2\n  geom_jitter(alpha = .5) + #REVEAL3\n  aes(color =\n  speed &gt; 14\n  ) %+%\n  cars -&gt;\n  my_plot  #REVEAL"
```
]]
---
class: split-40
count: false
.column[.content[

```r
flipbookr:::create_code() %&gt;%  
* stringr::str_split(., pattern = "\n")
```
]]
.column[.content[

```
[[1]]
 [1] "cars %&gt;%             # the data  #REVEAL"  
 [2] "  filter(speed &gt; 4) %&gt;%  # subset"         
 [3] "  ggplot() +              # pipe to ggplot"
 [4] "  aes(x = speed) +"                        
 [5] "  aes(y = dist) +"                         
 [6] "  # Describing what follows"               
 [7] "  geom_point(alpha = .3) + #REVEAL"        
 [8] "  geom_point(alpha = 1) + #REVEAL2"        
 [9] "  geom_jitter(alpha = .5) + #REVEAL3"      
[10] "  aes(color ="                             
[11] "  speed &gt; 14"                              
[12] "  ) %+%"                                   
[13] "  cars -&gt;"                                 
[14] "  my_plot  #REVEAL"                        
```
]]
---
class: split-40
count: false
.column[.content[

```r
flipbookr:::create_code() %&gt;%  
  stringr::str_split(., pattern = "\n") %&gt;%  
* .[[1]]
```
]]
.column[.content[

```
 [1] "cars %&gt;%             # the data  #REVEAL"  
 [2] "  filter(speed &gt; 4) %&gt;%  # subset"         
 [3] "  ggplot() +              # pipe to ggplot"
 [4] "  aes(x = speed) +"                        
 [5] "  aes(y = dist) +"                         
 [6] "  # Describing what follows"               
 [7] "  geom_point(alpha = .3) + #REVEAL"        
 [8] "  geom_point(alpha = 1) + #REVEAL2"        
 [9] "  geom_jitter(alpha = .5) + #REVEAL3"      
[10] "  aes(color ="                             
[11] "  speed &gt; 14"                              
[12] "  ) %+%"                                   
[13] "  cars -&gt;"                                 
[14] "  my_plot  #REVEAL"                        
```
]]
---
class: split-40
count: false
.column[.content[

```r
flipbookr:::create_code() %&gt;%  
  stringr::str_split(., pattern = "\n") %&gt;%  
  .[[1]] %&gt;%  
* tibble::tibble()
```
]]
.column[.content[

```
# A tibble: 14 x 1
   .                                           
   &lt;chr&gt;                                       
 1 "cars %&gt;%             # the data  #REVEAL"  
 2 "  filter(speed &gt; 4) %&gt;%  # subset"         
 3 "  ggplot() +              # pipe to ggplot"
 4 "  aes(x = speed) +"                        
 5 "  aes(y = dist) +"                         
 6 "  # Describing what follows"               
 7 "  geom_point(alpha = .3) + #REVEAL"        
 8 "  geom_point(alpha = 1) + #REVEAL2"        
 9 "  geom_jitter(alpha = .5) + #REVEAL3"      
10 "  aes(color ="                             
11 "  speed &gt; 14"                              
12 "  ) %+%"                                   
13 "  cars -&gt;"                                 
14 "  my_plot  #REVEAL"                        
```
]]
---
class: split-40
count: false
.column[.content[

```r
flipbookr:::create_code() %&gt;%  
  stringr::str_split(., pattern = "\n") %&gt;%  
  .[[1]] %&gt;%  
  tibble::tibble() %&gt;%  
* dplyr::rename(raw_code = 1)
```
]]
.column[.content[

```
# A tibble: 14 x 1
   raw_code                                    
   &lt;chr&gt;                                       
 1 "cars %&gt;%             # the data  #REVEAL"  
 2 "  filter(speed &gt; 4) %&gt;%  # subset"         
 3 "  ggplot() +              # pipe to ggplot"
 4 "  aes(x = speed) +"                        
 5 "  aes(y = dist) +"                         
 6 "  # Describing what follows"               
 7 "  geom_point(alpha = .3) + #REVEAL"        
 8 "  geom_point(alpha = 1) + #REVEAL2"        
 9 "  geom_jitter(alpha = .5) + #REVEAL3"      
10 "  aes(color ="                             
11 "  speed &gt; 14"                              
12 "  ) %+%"                                   
13 "  cars -&gt;"                                 
14 "  my_plot  #REVEAL"                        
```
]]
---
class: split-40
count: false
.column[.content[

```r
flipbookr:::create_code() %&gt;%  
  stringr::str_split(., pattern = "\n") %&gt;%  
  .[[1]] %&gt;%  
  tibble::tibble() %&gt;%  
  dplyr::rename(raw_code = 1) %&gt;%  
* dplyr::mutate(line = 1:dplyr::n())
```
]]
.column[.content[

```
# A tibble: 14 x 2
   raw_code                                      line
   &lt;chr&gt;                                        &lt;int&gt;
 1 "cars %&gt;%             # the data  #REVEAL"       1
 2 "  filter(speed &gt; 4) %&gt;%  # subset"              2
 3 "  ggplot() +              # pipe to ggplot"     3
 4 "  aes(x = speed) +"                             4
 5 "  aes(y = dist) +"                              5
 6 "  # Describing what follows"                    6
 7 "  geom_point(alpha = .3) + #REVEAL"             7
 8 "  geom_point(alpha = 1) + #REVEAL2"             8
 9 "  geom_jitter(alpha = .5) + #REVEAL3"           9
10 "  aes(color ="                                 10
11 "  speed &gt; 14"                                  11
12 "  ) %+%"                                       12
13 "  cars -&gt;"                                     13
14 "  my_plot  #REVEAL"                            14
```
]]
---
class: split-40
count: false
.column[.content[

```r
flipbookr:::create_code() %&gt;%  
  stringr::str_split(., pattern = "\n") %&gt;%  
  .[[1]] %&gt;%  
  tibble::tibble() %&gt;%  
  dplyr::rename(raw_code = 1) %&gt;%  
  dplyr::mutate(line = 1:dplyr::n()) -&gt;  
* raw_code_table
```
]]
.column[.content[

]]



---

class: split-40
count: false
.column[.content[

```r
*code &lt;- flipbookr:::create_code()
```
]]
.column[.content[

]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
* sf &lt;- srcfile(code)
```
]]
.column[.content[

]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
* try(parse(text = code, srcfile = sf))
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
* utils::getParseData(sf)
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
    line1 col1 line2 col2  id parent                token terminal
137     1    1    14    9 137      0                 expr    FALSE
131     1    1    13    6 131    137                 expr    FALSE
105     1    1     9   25 105    131                 expr    FALSE
90      1    1     8   23  90    105                 expr    FALSE
75      1    1     7   24  75     90                 expr    FALSE
59      1    1     5   15  59     75                 expr    FALSE
45      1    1     4   16  45     59                 expr    FALSE
30      1    1     3   10  30     45                 expr    FALSE
20      1    1     2   19  20     30                 expr    FALSE
1       1    1     1    4   1      3               SYMBOL     TRUE
3       1    1     1    4   3     20                 expr    FALSE
2       1    6     1    8   2     20              SPECIAL     TRUE
4       1   22     1   40   4     20              COMMENT     TRUE
18      2    3     2   19  18     20                 expr    FALSE
6       2    3     2    8   6      8 SYMBOL_FUNCTION_CALL     TRUE
8       2    3     2    8   8     18                 expr    FALSE
7       2    9     2    9   7     18                  '('     TRUE
15      2   10     2   18  15     18                 expr    FALSE
9       2   10     2   14   9     11               SYMBOL     TRUE
11      2   10     2   14  11     15                 expr    FALSE
10      2   16     2   16  10     15                   GT     TRUE
12      2   18     2   18  12     13            NUM_CONST     TRUE
13      2   18     2   18  13     15                 expr    FALSE
14      2   19     2   19  14     18                  ')'     TRUE
19      2   21     2   23  19     30              SPECIAL     TRUE
21      2   26     2   33  21     30              COMMENT     TRUE
28      3    3     3   10  28     30                 expr    FALSE
23      3    3     3    8  23     25 SYMBOL_FUNCTION_CALL     TRUE
25      3    3     3    8  25     28                 expr    FALSE
24      3    9     3    9  24     28                  '('     TRUE
26      3   10     3   10  26     28                  ')'     TRUE
29      3   12     3   12  29     45                  '+'     TRUE
31      3   27     3   42  31     45              COMMENT     TRUE
43      4    3     4   16  43     45                 expr    FALSE
33      4    3     4    5  33     35 SYMBOL_FUNCTION_CALL     TRUE
35      4    3     4    5  35     43                 expr    FALSE
34      4    6     4    6  34     43                  '('     TRUE
36      4    7     4    7  36     43           SYMBOL_SUB     TRUE
37      4    9     4    9  37     43               EQ_SUB     TRUE
38      4   11     4   15  38     40               SYMBOL     TRUE
40      4   11     4   15  40     43                 expr    FALSE
39      4   16     4   16  39     43                  ')'     TRUE
44      4   18     4   18  44     59                  '+'     TRUE
57      5    3     5   15  57     59                 expr    FALSE
47      5    3     5    5  47     49 SYMBOL_FUNCTION_CALL     TRUE
49      5    3     5    5  49     57                 expr    FALSE
48      5    6     5    6  48     57                  '('     TRUE
50      5    7     5    7  50     57           SYMBOL_SUB     TRUE
51      5    9     5    9  51     57               EQ_SUB     TRUE
52      5   11     5   14  52     54               SYMBOL     TRUE
54      5   11     5   14  54     57                 expr    FALSE
53      5   15     5   15  53     57                  ')'     TRUE
58      5   17     5   17  58     75                  '+'     TRUE
61      6    3     6   27  61     75              COMMENT     TRUE
73      7    3     7   24  73     75                 expr    FALSE
63      7    3     7   12  63     65 SYMBOL_FUNCTION_CALL     TRUE
65      7    3     7   12  65     73                 expr    FALSE
64      7   13     7   13  64     73                  '('     TRUE
66      7   14     7   18  66     73           SYMBOL_SUB     TRUE
67      7   20     7   20  67     73               EQ_SUB     TRUE
68      7   22     7   23  68     69            NUM_CONST     TRUE
69      7   22     7   23  69     73                 expr    FALSE
70      7   24     7   24  70     73                  ')'     TRUE
74      7   26     7   26  74     90                  '+'     TRUE
76      7   28     7   34  76     90              COMMENT     TRUE
88      8    3     8   23  88     90                 expr    FALSE
78      8    3     8   12  78     80 SYMBOL_FUNCTION_CALL     TRUE
80      8    3     8   12  80     88                 expr    FALSE
79      8   13     8   13  79     88                  '('     TRUE
81      8   14     8   18  81     88           SYMBOL_SUB     TRUE
82      8   20     8   20  82     88               EQ_SUB     TRUE
83      8   22     8   22  83     84            NUM_CONST     TRUE
84      8   22     8   22  84     88                 expr    FALSE
85      8   23     8   23  85     88                  ')'     TRUE
89      8   25     8   25  89    105                  '+'     TRUE
91      8   27     8   34  91    105              COMMENT     TRUE
103     9    3     9   25 103    105                 expr    FALSE
93      9    3     9   13  93     95 SYMBOL_FUNCTION_CALL     TRUE
95      9    3     9   13  95    103                 expr    FALSE
94      9   14     9   14  94    103                  '('     TRUE
96      9   15     9   19  96    103           SYMBOL_SUB     TRUE
97      9   21     9   21  97    103               EQ_SUB     TRUE
98      9   23     9   24  98     99            NUM_CONST     TRUE
99      9   23     9   24  99    103                 expr    FALSE
100     9   25     9   25 100    103                  ')'     TRUE
104     9   27     9   27 104    131                  '+'     TRUE
106     9   29     9   36 106    131              COMMENT     TRUE
130    10    3    13    6 130    131                 expr    FALSE
124    10    3    12    3 124    130                 expr    FALSE
108    10    3    10    5 108    110 SYMBOL_FUNCTION_CALL     TRUE
110    10    3    10    5 110    124                 expr    FALSE
109    10    6    10    6 109    124                  '('     TRUE
111    10    7    10   11 111    124           SYMBOL_SUB     TRUE
112    10   13    10   13 112    124               EQ_SUB     TRUE
121    11    3    11   12 121    124                 expr    FALSE
114    11    3    11    7 114    116               SYMBOL     TRUE
116    11    3    11    7 116    121                 expr    FALSE
115    11    9    11    9 115    121                   GT     TRUE
117    11   11    11   12 117    118            NUM_CONST     TRUE
118    11   11    11   12 118    121                 expr    FALSE
120    12    3    12    3 120    124                  ')'     TRUE
125    12    5    12    7 125    130              SPECIAL     TRUE
127    13    3    13    6 127    129               SYMBOL     TRUE
129    13    3    13    6 129    130                 expr    FALSE
128    13    8    13    9 128    137         RIGHT_ASSIGN     TRUE
133    14    3    14    9 133    136               SYMBOL     TRUE
136    14    3    14    9 136    137                 expr    FALSE
134    14   12    14   18 134   -137              COMMENT     TRUE
                         text
137                          
131                          
105                          
90                           
75                           
59                           
45                           
30                           
20                           
1                        cars
3                            
2                         %&gt;%
4         # the data  #REVEAL
18                           
6                      filter
8                            
7                           (
15                           
9                       speed
11                           
10                          &gt;
12                          4
13                           
14                          )
19                        %&gt;%
21                   # subset
28                           
23                     ggplot
25                           
24                          (
26                          )
29                          +
31           # pipe to ggplot
43                           
33                        aes
35                           
34                          (
36                          x
37                          =
38                      speed
40                           
39                          )
44                          +
57                           
47                        aes
49                           
48                          (
50                          y
51                          =
52                       dist
54                           
53                          )
58                          +
61  # Describing what follows
73                           
63                 geom_point
65                           
64                          (
66                      alpha
67                          =
68                         .3
69                           
70                          )
74                          +
76                    #REVEAL
88                           
78                 geom_point
80                           
79                          (
81                      alpha
82                          =
83                          1
84                           
85                          )
89                          +
91                   #REVEAL2
103                          
93                geom_jitter
95                           
94                          (
96                      alpha
97                          =
98                         .5
99                           
100                         )
104                         +
106                  #REVEAL3
130                          
124                          
108                       aes
110                          
109                         (
111                     color
112                         =
121                          
114                     speed
116                          
115                         &gt;
117                        14
118                          
120                         )
125                       %+%
127                      cars
129                          
128                        -&gt;
133                   my_plot
136                          
134                   #REVEAL
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
*   dplyr::rename(line = line1)
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
    line col1 line2 col2  id parent                token terminal
137    1    1    14    9 137      0                 expr    FALSE
131    1    1    13    6 131    137                 expr    FALSE
105    1    1     9   25 105    131                 expr    FALSE
90     1    1     8   23  90    105                 expr    FALSE
75     1    1     7   24  75     90                 expr    FALSE
59     1    1     5   15  59     75                 expr    FALSE
45     1    1     4   16  45     59                 expr    FALSE
30     1    1     3   10  30     45                 expr    FALSE
20     1    1     2   19  20     30                 expr    FALSE
1      1    1     1    4   1      3               SYMBOL     TRUE
3      1    1     1    4   3     20                 expr    FALSE
2      1    6     1    8   2     20              SPECIAL     TRUE
4      1   22     1   40   4     20              COMMENT     TRUE
18     2    3     2   19  18     20                 expr    FALSE
6      2    3     2    8   6      8 SYMBOL_FUNCTION_CALL     TRUE
8      2    3     2    8   8     18                 expr    FALSE
7      2    9     2    9   7     18                  '('     TRUE
15     2   10     2   18  15     18                 expr    FALSE
9      2   10     2   14   9     11               SYMBOL     TRUE
11     2   10     2   14  11     15                 expr    FALSE
10     2   16     2   16  10     15                   GT     TRUE
12     2   18     2   18  12     13            NUM_CONST     TRUE
13     2   18     2   18  13     15                 expr    FALSE
14     2   19     2   19  14     18                  ')'     TRUE
19     2   21     2   23  19     30              SPECIAL     TRUE
21     2   26     2   33  21     30              COMMENT     TRUE
28     3    3     3   10  28     30                 expr    FALSE
23     3    3     3    8  23     25 SYMBOL_FUNCTION_CALL     TRUE
25     3    3     3    8  25     28                 expr    FALSE
24     3    9     3    9  24     28                  '('     TRUE
26     3   10     3   10  26     28                  ')'     TRUE
29     3   12     3   12  29     45                  '+'     TRUE
31     3   27     3   42  31     45              COMMENT     TRUE
43     4    3     4   16  43     45                 expr    FALSE
33     4    3     4    5  33     35 SYMBOL_FUNCTION_CALL     TRUE
35     4    3     4    5  35     43                 expr    FALSE
34     4    6     4    6  34     43                  '('     TRUE
36     4    7     4    7  36     43           SYMBOL_SUB     TRUE
37     4    9     4    9  37     43               EQ_SUB     TRUE
38     4   11     4   15  38     40               SYMBOL     TRUE
40     4   11     4   15  40     43                 expr    FALSE
39     4   16     4   16  39     43                  ')'     TRUE
44     4   18     4   18  44     59                  '+'     TRUE
57     5    3     5   15  57     59                 expr    FALSE
47     5    3     5    5  47     49 SYMBOL_FUNCTION_CALL     TRUE
49     5    3     5    5  49     57                 expr    FALSE
48     5    6     5    6  48     57                  '('     TRUE
50     5    7     5    7  50     57           SYMBOL_SUB     TRUE
51     5    9     5    9  51     57               EQ_SUB     TRUE
52     5   11     5   14  52     54               SYMBOL     TRUE
54     5   11     5   14  54     57                 expr    FALSE
53     5   15     5   15  53     57                  ')'     TRUE
58     5   17     5   17  58     75                  '+'     TRUE
61     6    3     6   27  61     75              COMMENT     TRUE
73     7    3     7   24  73     75                 expr    FALSE
63     7    3     7   12  63     65 SYMBOL_FUNCTION_CALL     TRUE
65     7    3     7   12  65     73                 expr    FALSE
64     7   13     7   13  64     73                  '('     TRUE
66     7   14     7   18  66     73           SYMBOL_SUB     TRUE
67     7   20     7   20  67     73               EQ_SUB     TRUE
68     7   22     7   23  68     69            NUM_CONST     TRUE
69     7   22     7   23  69     73                 expr    FALSE
70     7   24     7   24  70     73                  ')'     TRUE
74     7   26     7   26  74     90                  '+'     TRUE
76     7   28     7   34  76     90              COMMENT     TRUE
88     8    3     8   23  88     90                 expr    FALSE
78     8    3     8   12  78     80 SYMBOL_FUNCTION_CALL     TRUE
80     8    3     8   12  80     88                 expr    FALSE
79     8   13     8   13  79     88                  '('     TRUE
81     8   14     8   18  81     88           SYMBOL_SUB     TRUE
82     8   20     8   20  82     88               EQ_SUB     TRUE
83     8   22     8   22  83     84            NUM_CONST     TRUE
84     8   22     8   22  84     88                 expr    FALSE
85     8   23     8   23  85     88                  ')'     TRUE
89     8   25     8   25  89    105                  '+'     TRUE
91     8   27     8   34  91    105              COMMENT     TRUE
103    9    3     9   25 103    105                 expr    FALSE
93     9    3     9   13  93     95 SYMBOL_FUNCTION_CALL     TRUE
95     9    3     9   13  95    103                 expr    FALSE
94     9   14     9   14  94    103                  '('     TRUE
96     9   15     9   19  96    103           SYMBOL_SUB     TRUE
97     9   21     9   21  97    103               EQ_SUB     TRUE
98     9   23     9   24  98     99            NUM_CONST     TRUE
99     9   23     9   24  99    103                 expr    FALSE
100    9   25     9   25 100    103                  ')'     TRUE
104    9   27     9   27 104    131                  '+'     TRUE
106    9   29     9   36 106    131              COMMENT     TRUE
130   10    3    13    6 130    131                 expr    FALSE
124   10    3    12    3 124    130                 expr    FALSE
108   10    3    10    5 108    110 SYMBOL_FUNCTION_CALL     TRUE
110   10    3    10    5 110    124                 expr    FALSE
109   10    6    10    6 109    124                  '('     TRUE
111   10    7    10   11 111    124           SYMBOL_SUB     TRUE
112   10   13    10   13 112    124               EQ_SUB     TRUE
121   11    3    11   12 121    124                 expr    FALSE
114   11    3    11    7 114    116               SYMBOL     TRUE
116   11    3    11    7 116    121                 expr    FALSE
115   11    9    11    9 115    121                   GT     TRUE
117   11   11    11   12 117    118            NUM_CONST     TRUE
118   11   11    11   12 118    121                 expr    FALSE
120   12    3    12    3 120    124                  ')'     TRUE
125   12    5    12    7 125    130              SPECIAL     TRUE
127   13    3    13    6 127    129               SYMBOL     TRUE
129   13    3    13    6 129    130                 expr    FALSE
128   13    8    13    9 128    137         RIGHT_ASSIGN     TRUE
133   14    3    14    9 133    136               SYMBOL     TRUE
136   14    3    14    9 136    137                 expr    FALSE
134   14   12    14   18 134   -137              COMMENT     TRUE
                         text
137                          
131                          
105                          
90                           
75                           
59                           
45                           
30                           
20                           
1                        cars
3                            
2                         %&gt;%
4         # the data  #REVEAL
18                           
6                      filter
8                            
7                           (
15                           
9                       speed
11                           
10                          &gt;
12                          4
13                           
14                          )
19                        %&gt;%
21                   # subset
28                           
23                     ggplot
25                           
24                          (
26                          )
29                          +
31           # pipe to ggplot
43                           
33                        aes
35                           
34                          (
36                          x
37                          =
38                      speed
40                           
39                          )
44                          +
57                           
47                        aes
49                           
48                          (
50                          y
51                          =
52                       dist
54                           
53                          )
58                          +
61  # Describing what follows
73                           
63                 geom_point
65                           
64                          (
66                      alpha
67                          =
68                         .3
69                           
70                          )
74                          +
76                    #REVEAL
88                           
78                 geom_point
80                           
79                          (
81                      alpha
82                          =
83                          1
84                           
85                          )
89                          +
91                   #REVEAL2
103                          
93                geom_jitter
95                           
94                          (
96                      alpha
97                          =
98                         .5
99                           
100                         )
104                         +
106                  #REVEAL3
130                          
124                          
108                       aes
110                          
109                         (
111                     color
112                         =
121                          
114                     speed
116                          
115                         &gt;
117                        14
118                          
120                         )
125                       %+%
127                      cars
129                          
128                        -&gt;
133                   my_plot
136                          
134                   #REVEAL
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
*   dplyr::mutate(open_par = text == "(")
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
    line col1 line2 col2  id parent                token terminal
1      1    1    14    9 137      0                 expr    FALSE
2      1    1    13    6 131    137                 expr    FALSE
3      1    1     9   25 105    131                 expr    FALSE
4      1    1     8   23  90    105                 expr    FALSE
5      1    1     7   24  75     90                 expr    FALSE
6      1    1     5   15  59     75                 expr    FALSE
7      1    1     4   16  45     59                 expr    FALSE
8      1    1     3   10  30     45                 expr    FALSE
9      1    1     2   19  20     30                 expr    FALSE
10     1    1     1    4   1      3               SYMBOL     TRUE
11     1    1     1    4   3     20                 expr    FALSE
12     1    6     1    8   2     20              SPECIAL     TRUE
13     1   22     1   40   4     20              COMMENT     TRUE
14     2    3     2   19  18     20                 expr    FALSE
15     2    3     2    8   6      8 SYMBOL_FUNCTION_CALL     TRUE
16     2    3     2    8   8     18                 expr    FALSE
17     2    9     2    9   7     18                  '('     TRUE
18     2   10     2   18  15     18                 expr    FALSE
19     2   10     2   14   9     11               SYMBOL     TRUE
20     2   10     2   14  11     15                 expr    FALSE
21     2   16     2   16  10     15                   GT     TRUE
22     2   18     2   18  12     13            NUM_CONST     TRUE
23     2   18     2   18  13     15                 expr    FALSE
24     2   19     2   19  14     18                  ')'     TRUE
25     2   21     2   23  19     30              SPECIAL     TRUE
26     2   26     2   33  21     30              COMMENT     TRUE
27     3    3     3   10  28     30                 expr    FALSE
28     3    3     3    8  23     25 SYMBOL_FUNCTION_CALL     TRUE
29     3    3     3    8  25     28                 expr    FALSE
30     3    9     3    9  24     28                  '('     TRUE
31     3   10     3   10  26     28                  ')'     TRUE
32     3   12     3   12  29     45                  '+'     TRUE
33     3   27     3   42  31     45              COMMENT     TRUE
34     4    3     4   16  43     45                 expr    FALSE
35     4    3     4    5  33     35 SYMBOL_FUNCTION_CALL     TRUE
36     4    3     4    5  35     43                 expr    FALSE
37     4    6     4    6  34     43                  '('     TRUE
38     4    7     4    7  36     43           SYMBOL_SUB     TRUE
39     4    9     4    9  37     43               EQ_SUB     TRUE
40     4   11     4   15  38     40               SYMBOL     TRUE
41     4   11     4   15  40     43                 expr    FALSE
42     4   16     4   16  39     43                  ')'     TRUE
43     4   18     4   18  44     59                  '+'     TRUE
44     5    3     5   15  57     59                 expr    FALSE
45     5    3     5    5  47     49 SYMBOL_FUNCTION_CALL     TRUE
46     5    3     5    5  49     57                 expr    FALSE
47     5    6     5    6  48     57                  '('     TRUE
48     5    7     5    7  50     57           SYMBOL_SUB     TRUE
49     5    9     5    9  51     57               EQ_SUB     TRUE
50     5   11     5   14  52     54               SYMBOL     TRUE
51     5   11     5   14  54     57                 expr    FALSE
52     5   15     5   15  53     57                  ')'     TRUE
53     5   17     5   17  58     75                  '+'     TRUE
54     6    3     6   27  61     75              COMMENT     TRUE
55     7    3     7   24  73     75                 expr    FALSE
56     7    3     7   12  63     65 SYMBOL_FUNCTION_CALL     TRUE
57     7    3     7   12  65     73                 expr    FALSE
58     7   13     7   13  64     73                  '('     TRUE
59     7   14     7   18  66     73           SYMBOL_SUB     TRUE
60     7   20     7   20  67     73               EQ_SUB     TRUE
61     7   22     7   23  68     69            NUM_CONST     TRUE
62     7   22     7   23  69     73                 expr    FALSE
63     7   24     7   24  70     73                  ')'     TRUE
64     7   26     7   26  74     90                  '+'     TRUE
65     7   28     7   34  76     90              COMMENT     TRUE
66     8    3     8   23  88     90                 expr    FALSE
67     8    3     8   12  78     80 SYMBOL_FUNCTION_CALL     TRUE
68     8    3     8   12  80     88                 expr    FALSE
69     8   13     8   13  79     88                  '('     TRUE
70     8   14     8   18  81     88           SYMBOL_SUB     TRUE
71     8   20     8   20  82     88               EQ_SUB     TRUE
72     8   22     8   22  83     84            NUM_CONST     TRUE
73     8   22     8   22  84     88                 expr    FALSE
74     8   23     8   23  85     88                  ')'     TRUE
75     8   25     8   25  89    105                  '+'     TRUE
76     8   27     8   34  91    105              COMMENT     TRUE
77     9    3     9   25 103    105                 expr    FALSE
78     9    3     9   13  93     95 SYMBOL_FUNCTION_CALL     TRUE
79     9    3     9   13  95    103                 expr    FALSE
80     9   14     9   14  94    103                  '('     TRUE
81     9   15     9   19  96    103           SYMBOL_SUB     TRUE
82     9   21     9   21  97    103               EQ_SUB     TRUE
83     9   23     9   24  98     99            NUM_CONST     TRUE
84     9   23     9   24  99    103                 expr    FALSE
85     9   25     9   25 100    103                  ')'     TRUE
86     9   27     9   27 104    131                  '+'     TRUE
87     9   29     9   36 106    131              COMMENT     TRUE
88    10    3    13    6 130    131                 expr    FALSE
89    10    3    12    3 124    130                 expr    FALSE
90    10    3    10    5 108    110 SYMBOL_FUNCTION_CALL     TRUE
91    10    3    10    5 110    124                 expr    FALSE
92    10    6    10    6 109    124                  '('     TRUE
93    10    7    10   11 111    124           SYMBOL_SUB     TRUE
94    10   13    10   13 112    124               EQ_SUB     TRUE
95    11    3    11   12 121    124                 expr    FALSE
96    11    3    11    7 114    116               SYMBOL     TRUE
97    11    3    11    7 116    121                 expr    FALSE
98    11    9    11    9 115    121                   GT     TRUE
99    11   11    11   12 117    118            NUM_CONST     TRUE
100   11   11    11   12 118    121                 expr    FALSE
101   12    3    12    3 120    124                  ')'     TRUE
102   12    5    12    7 125    130              SPECIAL     TRUE
103   13    3    13    6 127    129               SYMBOL     TRUE
104   13    3    13    6 129    130                 expr    FALSE
105   13    8    13    9 128    137         RIGHT_ASSIGN     TRUE
106   14    3    14    9 133    136               SYMBOL     TRUE
107   14    3    14    9 136    137                 expr    FALSE
108   14   12    14   18 134   -137              COMMENT     TRUE
                         text open_par
1                                FALSE
2                                FALSE
3                                FALSE
4                                FALSE
5                                FALSE
6                                FALSE
7                                FALSE
8                                FALSE
9                                FALSE
10                       cars    FALSE
11                               FALSE
12                        %&gt;%    FALSE
13        # the data  #REVEAL    FALSE
14                               FALSE
15                     filter    FALSE
16                               FALSE
17                          (     TRUE
18                               FALSE
19                      speed    FALSE
20                               FALSE
21                          &gt;    FALSE
22                          4    FALSE
23                               FALSE
24                          )    FALSE
25                        %&gt;%    FALSE
26                   # subset    FALSE
27                               FALSE
28                     ggplot    FALSE
29                               FALSE
30                          (     TRUE
31                          )    FALSE
32                          +    FALSE
33           # pipe to ggplot    FALSE
34                               FALSE
35                        aes    FALSE
36                               FALSE
37                          (     TRUE
38                          x    FALSE
39                          =    FALSE
40                      speed    FALSE
41                               FALSE
42                          )    FALSE
43                          +    FALSE
44                               FALSE
45                        aes    FALSE
46                               FALSE
47                          (     TRUE
48                          y    FALSE
49                          =    FALSE
50                       dist    FALSE
51                               FALSE
52                          )    FALSE
53                          +    FALSE
54  # Describing what follows    FALSE
55                               FALSE
56                 geom_point    FALSE
57                               FALSE
58                          (     TRUE
59                      alpha    FALSE
60                          =    FALSE
61                         .3    FALSE
62                               FALSE
63                          )    FALSE
64                          +    FALSE
65                    #REVEAL    FALSE
66                               FALSE
67                 geom_point    FALSE
68                               FALSE
69                          (     TRUE
70                      alpha    FALSE
71                          =    FALSE
72                          1    FALSE
73                               FALSE
74                          )    FALSE
75                          +    FALSE
76                   #REVEAL2    FALSE
77                               FALSE
78                geom_jitter    FALSE
79                               FALSE
80                          (     TRUE
81                      alpha    FALSE
82                          =    FALSE
83                         .5    FALSE
84                               FALSE
85                          )    FALSE
86                          +    FALSE
87                   #REVEAL3    FALSE
88                               FALSE
89                               FALSE
90                        aes    FALSE
91                               FALSE
92                          (     TRUE
93                      color    FALSE
94                          =    FALSE
95                               FALSE
96                      speed    FALSE
97                               FALSE
98                          &gt;    FALSE
99                         14    FALSE
100                              FALSE
101                         )    FALSE
102                       %+%    FALSE
103                      cars    FALSE
104                              FALSE
105                        -&gt;    FALSE
106                   my_plot    FALSE
107                              FALSE
108                   #REVEAL    FALSE
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
*   dplyr::mutate(closed_par = text == ")")
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
    line col1 line2 col2  id parent                token terminal
1      1    1    14    9 137      0                 expr    FALSE
2      1    1    13    6 131    137                 expr    FALSE
3      1    1     9   25 105    131                 expr    FALSE
4      1    1     8   23  90    105                 expr    FALSE
5      1    1     7   24  75     90                 expr    FALSE
6      1    1     5   15  59     75                 expr    FALSE
7      1    1     4   16  45     59                 expr    FALSE
8      1    1     3   10  30     45                 expr    FALSE
9      1    1     2   19  20     30                 expr    FALSE
10     1    1     1    4   1      3               SYMBOL     TRUE
11     1    1     1    4   3     20                 expr    FALSE
12     1    6     1    8   2     20              SPECIAL     TRUE
13     1   22     1   40   4     20              COMMENT     TRUE
14     2    3     2   19  18     20                 expr    FALSE
15     2    3     2    8   6      8 SYMBOL_FUNCTION_CALL     TRUE
16     2    3     2    8   8     18                 expr    FALSE
17     2    9     2    9   7     18                  '('     TRUE
18     2   10     2   18  15     18                 expr    FALSE
19     2   10     2   14   9     11               SYMBOL     TRUE
20     2   10     2   14  11     15                 expr    FALSE
21     2   16     2   16  10     15                   GT     TRUE
22     2   18     2   18  12     13            NUM_CONST     TRUE
23     2   18     2   18  13     15                 expr    FALSE
24     2   19     2   19  14     18                  ')'     TRUE
25     2   21     2   23  19     30              SPECIAL     TRUE
26     2   26     2   33  21     30              COMMENT     TRUE
27     3    3     3   10  28     30                 expr    FALSE
28     3    3     3    8  23     25 SYMBOL_FUNCTION_CALL     TRUE
29     3    3     3    8  25     28                 expr    FALSE
30     3    9     3    9  24     28                  '('     TRUE
31     3   10     3   10  26     28                  ')'     TRUE
32     3   12     3   12  29     45                  '+'     TRUE
33     3   27     3   42  31     45              COMMENT     TRUE
34     4    3     4   16  43     45                 expr    FALSE
35     4    3     4    5  33     35 SYMBOL_FUNCTION_CALL     TRUE
36     4    3     4    5  35     43                 expr    FALSE
37     4    6     4    6  34     43                  '('     TRUE
38     4    7     4    7  36     43           SYMBOL_SUB     TRUE
39     4    9     4    9  37     43               EQ_SUB     TRUE
40     4   11     4   15  38     40               SYMBOL     TRUE
41     4   11     4   15  40     43                 expr    FALSE
42     4   16     4   16  39     43                  ')'     TRUE
43     4   18     4   18  44     59                  '+'     TRUE
44     5    3     5   15  57     59                 expr    FALSE
45     5    3     5    5  47     49 SYMBOL_FUNCTION_CALL     TRUE
46     5    3     5    5  49     57                 expr    FALSE
47     5    6     5    6  48     57                  '('     TRUE
48     5    7     5    7  50     57           SYMBOL_SUB     TRUE
49     5    9     5    9  51     57               EQ_SUB     TRUE
50     5   11     5   14  52     54               SYMBOL     TRUE
51     5   11     5   14  54     57                 expr    FALSE
52     5   15     5   15  53     57                  ')'     TRUE
53     5   17     5   17  58     75                  '+'     TRUE
54     6    3     6   27  61     75              COMMENT     TRUE
55     7    3     7   24  73     75                 expr    FALSE
56     7    3     7   12  63     65 SYMBOL_FUNCTION_CALL     TRUE
57     7    3     7   12  65     73                 expr    FALSE
58     7   13     7   13  64     73                  '('     TRUE
59     7   14     7   18  66     73           SYMBOL_SUB     TRUE
60     7   20     7   20  67     73               EQ_SUB     TRUE
61     7   22     7   23  68     69            NUM_CONST     TRUE
62     7   22     7   23  69     73                 expr    FALSE
63     7   24     7   24  70     73                  ')'     TRUE
64     7   26     7   26  74     90                  '+'     TRUE
65     7   28     7   34  76     90              COMMENT     TRUE
66     8    3     8   23  88     90                 expr    FALSE
67     8    3     8   12  78     80 SYMBOL_FUNCTION_CALL     TRUE
68     8    3     8   12  80     88                 expr    FALSE
69     8   13     8   13  79     88                  '('     TRUE
70     8   14     8   18  81     88           SYMBOL_SUB     TRUE
71     8   20     8   20  82     88               EQ_SUB     TRUE
72     8   22     8   22  83     84            NUM_CONST     TRUE
73     8   22     8   22  84     88                 expr    FALSE
74     8   23     8   23  85     88                  ')'     TRUE
75     8   25     8   25  89    105                  '+'     TRUE
76     8   27     8   34  91    105              COMMENT     TRUE
77     9    3     9   25 103    105                 expr    FALSE
78     9    3     9   13  93     95 SYMBOL_FUNCTION_CALL     TRUE
79     9    3     9   13  95    103                 expr    FALSE
80     9   14     9   14  94    103                  '('     TRUE
81     9   15     9   19  96    103           SYMBOL_SUB     TRUE
82     9   21     9   21  97    103               EQ_SUB     TRUE
83     9   23     9   24  98     99            NUM_CONST     TRUE
84     9   23     9   24  99    103                 expr    FALSE
85     9   25     9   25 100    103                  ')'     TRUE
86     9   27     9   27 104    131                  '+'     TRUE
87     9   29     9   36 106    131              COMMENT     TRUE
88    10    3    13    6 130    131                 expr    FALSE
89    10    3    12    3 124    130                 expr    FALSE
90    10    3    10    5 108    110 SYMBOL_FUNCTION_CALL     TRUE
91    10    3    10    5 110    124                 expr    FALSE
92    10    6    10    6 109    124                  '('     TRUE
93    10    7    10   11 111    124           SYMBOL_SUB     TRUE
94    10   13    10   13 112    124               EQ_SUB     TRUE
95    11    3    11   12 121    124                 expr    FALSE
96    11    3    11    7 114    116               SYMBOL     TRUE
97    11    3    11    7 116    121                 expr    FALSE
98    11    9    11    9 115    121                   GT     TRUE
99    11   11    11   12 117    118            NUM_CONST     TRUE
100   11   11    11   12 118    121                 expr    FALSE
101   12    3    12    3 120    124                  ')'     TRUE
102   12    5    12    7 125    130              SPECIAL     TRUE
103   13    3    13    6 127    129               SYMBOL     TRUE
104   13    3    13    6 129    130                 expr    FALSE
105   13    8    13    9 128    137         RIGHT_ASSIGN     TRUE
106   14    3    14    9 133    136               SYMBOL     TRUE
107   14    3    14    9 136    137                 expr    FALSE
108   14   12    14   18 134   -137              COMMENT     TRUE
                         text open_par closed_par
1                                FALSE      FALSE
2                                FALSE      FALSE
3                                FALSE      FALSE
4                                FALSE      FALSE
5                                FALSE      FALSE
6                                FALSE      FALSE
7                                FALSE      FALSE
8                                FALSE      FALSE
9                                FALSE      FALSE
10                       cars    FALSE      FALSE
11                               FALSE      FALSE
12                        %&gt;%    FALSE      FALSE
13        # the data  #REVEAL    FALSE      FALSE
14                               FALSE      FALSE
15                     filter    FALSE      FALSE
16                               FALSE      FALSE
17                          (     TRUE      FALSE
18                               FALSE      FALSE
19                      speed    FALSE      FALSE
20                               FALSE      FALSE
21                          &gt;    FALSE      FALSE
22                          4    FALSE      FALSE
23                               FALSE      FALSE
24                          )    FALSE       TRUE
25                        %&gt;%    FALSE      FALSE
26                   # subset    FALSE      FALSE
27                               FALSE      FALSE
28                     ggplot    FALSE      FALSE
29                               FALSE      FALSE
30                          (     TRUE      FALSE
31                          )    FALSE       TRUE
32                          +    FALSE      FALSE
33           # pipe to ggplot    FALSE      FALSE
34                               FALSE      FALSE
35                        aes    FALSE      FALSE
36                               FALSE      FALSE
37                          (     TRUE      FALSE
38                          x    FALSE      FALSE
39                          =    FALSE      FALSE
40                      speed    FALSE      FALSE
41                               FALSE      FALSE
42                          )    FALSE       TRUE
43                          +    FALSE      FALSE
44                               FALSE      FALSE
45                        aes    FALSE      FALSE
46                               FALSE      FALSE
47                          (     TRUE      FALSE
48                          y    FALSE      FALSE
49                          =    FALSE      FALSE
50                       dist    FALSE      FALSE
51                               FALSE      FALSE
52                          )    FALSE       TRUE
53                          +    FALSE      FALSE
54  # Describing what follows    FALSE      FALSE
55                               FALSE      FALSE
56                 geom_point    FALSE      FALSE
57                               FALSE      FALSE
58                          (     TRUE      FALSE
59                      alpha    FALSE      FALSE
60                          =    FALSE      FALSE
61                         .3    FALSE      FALSE
62                               FALSE      FALSE
63                          )    FALSE       TRUE
64                          +    FALSE      FALSE
65                    #REVEAL    FALSE      FALSE
66                               FALSE      FALSE
67                 geom_point    FALSE      FALSE
68                               FALSE      FALSE
69                          (     TRUE      FALSE
70                      alpha    FALSE      FALSE
71                          =    FALSE      FALSE
72                          1    FALSE      FALSE
73                               FALSE      FALSE
74                          )    FALSE       TRUE
75                          +    FALSE      FALSE
76                   #REVEAL2    FALSE      FALSE
77                               FALSE      FALSE
78                geom_jitter    FALSE      FALSE
79                               FALSE      FALSE
80                          (     TRUE      FALSE
81                      alpha    FALSE      FALSE
82                          =    FALSE      FALSE
83                         .5    FALSE      FALSE
84                               FALSE      FALSE
85                          )    FALSE       TRUE
86                          +    FALSE      FALSE
87                   #REVEAL3    FALSE      FALSE
88                               FALSE      FALSE
89                               FALSE      FALSE
90                        aes    FALSE      FALSE
91                               FALSE      FALSE
92                          (     TRUE      FALSE
93                      color    FALSE      FALSE
94                          =    FALSE      FALSE
95                               FALSE      FALSE
96                      speed    FALSE      FALSE
97                               FALSE      FALSE
98                          &gt;    FALSE      FALSE
99                         14    FALSE      FALSE
100                              FALSE      FALSE
101                         )    FALSE       TRUE
102                       %+%    FALSE      FALSE
103                      cars    FALSE      FALSE
104                              FALSE      FALSE
105                        -&gt;    FALSE      FALSE
106                   my_plot    FALSE      FALSE
107                              FALSE      FALSE
108                   #REVEAL    FALSE      FALSE
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
*   dplyr::mutate(open_curly = text == "{")
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
    line col1 line2 col2  id parent                token terminal
1      1    1    14    9 137      0                 expr    FALSE
2      1    1    13    6 131    137                 expr    FALSE
3      1    1     9   25 105    131                 expr    FALSE
4      1    1     8   23  90    105                 expr    FALSE
5      1    1     7   24  75     90                 expr    FALSE
6      1    1     5   15  59     75                 expr    FALSE
7      1    1     4   16  45     59                 expr    FALSE
8      1    1     3   10  30     45                 expr    FALSE
9      1    1     2   19  20     30                 expr    FALSE
10     1    1     1    4   1      3               SYMBOL     TRUE
11     1    1     1    4   3     20                 expr    FALSE
12     1    6     1    8   2     20              SPECIAL     TRUE
13     1   22     1   40   4     20              COMMENT     TRUE
14     2    3     2   19  18     20                 expr    FALSE
15     2    3     2    8   6      8 SYMBOL_FUNCTION_CALL     TRUE
16     2    3     2    8   8     18                 expr    FALSE
17     2    9     2    9   7     18                  '('     TRUE
18     2   10     2   18  15     18                 expr    FALSE
19     2   10     2   14   9     11               SYMBOL     TRUE
20     2   10     2   14  11     15                 expr    FALSE
21     2   16     2   16  10     15                   GT     TRUE
22     2   18     2   18  12     13            NUM_CONST     TRUE
23     2   18     2   18  13     15                 expr    FALSE
24     2   19     2   19  14     18                  ')'     TRUE
25     2   21     2   23  19     30              SPECIAL     TRUE
26     2   26     2   33  21     30              COMMENT     TRUE
27     3    3     3   10  28     30                 expr    FALSE
28     3    3     3    8  23     25 SYMBOL_FUNCTION_CALL     TRUE
29     3    3     3    8  25     28                 expr    FALSE
30     3    9     3    9  24     28                  '('     TRUE
31     3   10     3   10  26     28                  ')'     TRUE
32     3   12     3   12  29     45                  '+'     TRUE
33     3   27     3   42  31     45              COMMENT     TRUE
34     4    3     4   16  43     45                 expr    FALSE
35     4    3     4    5  33     35 SYMBOL_FUNCTION_CALL     TRUE
36     4    3     4    5  35     43                 expr    FALSE
37     4    6     4    6  34     43                  '('     TRUE
38     4    7     4    7  36     43           SYMBOL_SUB     TRUE
39     4    9     4    9  37     43               EQ_SUB     TRUE
40     4   11     4   15  38     40               SYMBOL     TRUE
41     4   11     4   15  40     43                 expr    FALSE
42     4   16     4   16  39     43                  ')'     TRUE
43     4   18     4   18  44     59                  '+'     TRUE
44     5    3     5   15  57     59                 expr    FALSE
45     5    3     5    5  47     49 SYMBOL_FUNCTION_CALL     TRUE
46     5    3     5    5  49     57                 expr    FALSE
47     5    6     5    6  48     57                  '('     TRUE
48     5    7     5    7  50     57           SYMBOL_SUB     TRUE
49     5    9     5    9  51     57               EQ_SUB     TRUE
50     5   11     5   14  52     54               SYMBOL     TRUE
51     5   11     5   14  54     57                 expr    FALSE
52     5   15     5   15  53     57                  ')'     TRUE
53     5   17     5   17  58     75                  '+'     TRUE
54     6    3     6   27  61     75              COMMENT     TRUE
55     7    3     7   24  73     75                 expr    FALSE
56     7    3     7   12  63     65 SYMBOL_FUNCTION_CALL     TRUE
57     7    3     7   12  65     73                 expr    FALSE
58     7   13     7   13  64     73                  '('     TRUE
59     7   14     7   18  66     73           SYMBOL_SUB     TRUE
60     7   20     7   20  67     73               EQ_SUB     TRUE
61     7   22     7   23  68     69            NUM_CONST     TRUE
62     7   22     7   23  69     73                 expr    FALSE
63     7   24     7   24  70     73                  ')'     TRUE
64     7   26     7   26  74     90                  '+'     TRUE
65     7   28     7   34  76     90              COMMENT     TRUE
66     8    3     8   23  88     90                 expr    FALSE
67     8    3     8   12  78     80 SYMBOL_FUNCTION_CALL     TRUE
68     8    3     8   12  80     88                 expr    FALSE
69     8   13     8   13  79     88                  '('     TRUE
70     8   14     8   18  81     88           SYMBOL_SUB     TRUE
71     8   20     8   20  82     88               EQ_SUB     TRUE
72     8   22     8   22  83     84            NUM_CONST     TRUE
73     8   22     8   22  84     88                 expr    FALSE
74     8   23     8   23  85     88                  ')'     TRUE
75     8   25     8   25  89    105                  '+'     TRUE
76     8   27     8   34  91    105              COMMENT     TRUE
77     9    3     9   25 103    105                 expr    FALSE
78     9    3     9   13  93     95 SYMBOL_FUNCTION_CALL     TRUE
79     9    3     9   13  95    103                 expr    FALSE
80     9   14     9   14  94    103                  '('     TRUE
81     9   15     9   19  96    103           SYMBOL_SUB     TRUE
82     9   21     9   21  97    103               EQ_SUB     TRUE
83     9   23     9   24  98     99            NUM_CONST     TRUE
84     9   23     9   24  99    103                 expr    FALSE
85     9   25     9   25 100    103                  ')'     TRUE
86     9   27     9   27 104    131                  '+'     TRUE
87     9   29     9   36 106    131              COMMENT     TRUE
88    10    3    13    6 130    131                 expr    FALSE
89    10    3    12    3 124    130                 expr    FALSE
90    10    3    10    5 108    110 SYMBOL_FUNCTION_CALL     TRUE
91    10    3    10    5 110    124                 expr    FALSE
92    10    6    10    6 109    124                  '('     TRUE
93    10    7    10   11 111    124           SYMBOL_SUB     TRUE
94    10   13    10   13 112    124               EQ_SUB     TRUE
95    11    3    11   12 121    124                 expr    FALSE
96    11    3    11    7 114    116               SYMBOL     TRUE
97    11    3    11    7 116    121                 expr    FALSE
98    11    9    11    9 115    121                   GT     TRUE
99    11   11    11   12 117    118            NUM_CONST     TRUE
100   11   11    11   12 118    121                 expr    FALSE
101   12    3    12    3 120    124                  ')'     TRUE
102   12    5    12    7 125    130              SPECIAL     TRUE
103   13    3    13    6 127    129               SYMBOL     TRUE
104   13    3    13    6 129    130                 expr    FALSE
105   13    8    13    9 128    137         RIGHT_ASSIGN     TRUE
106   14    3    14    9 133    136               SYMBOL     TRUE
107   14    3    14    9 136    137                 expr    FALSE
108   14   12    14   18 134   -137              COMMENT     TRUE
                         text open_par closed_par open_curly
1                                FALSE      FALSE      FALSE
2                                FALSE      FALSE      FALSE
3                                FALSE      FALSE      FALSE
4                                FALSE      FALSE      FALSE
5                                FALSE      FALSE      FALSE
6                                FALSE      FALSE      FALSE
7                                FALSE      FALSE      FALSE
8                                FALSE      FALSE      FALSE
9                                FALSE      FALSE      FALSE
10                       cars    FALSE      FALSE      FALSE
11                               FALSE      FALSE      FALSE
12                        %&gt;%    FALSE      FALSE      FALSE
13        # the data  #REVEAL    FALSE      FALSE      FALSE
14                               FALSE      FALSE      FALSE
15                     filter    FALSE      FALSE      FALSE
16                               FALSE      FALSE      FALSE
17                          (     TRUE      FALSE      FALSE
18                               FALSE      FALSE      FALSE
19                      speed    FALSE      FALSE      FALSE
20                               FALSE      FALSE      FALSE
21                          &gt;    FALSE      FALSE      FALSE
22                          4    FALSE      FALSE      FALSE
23                               FALSE      FALSE      FALSE
24                          )    FALSE       TRUE      FALSE
25                        %&gt;%    FALSE      FALSE      FALSE
26                   # subset    FALSE      FALSE      FALSE
27                               FALSE      FALSE      FALSE
28                     ggplot    FALSE      FALSE      FALSE
29                               FALSE      FALSE      FALSE
30                          (     TRUE      FALSE      FALSE
31                          )    FALSE       TRUE      FALSE
32                          +    FALSE      FALSE      FALSE
33           # pipe to ggplot    FALSE      FALSE      FALSE
34                               FALSE      FALSE      FALSE
35                        aes    FALSE      FALSE      FALSE
36                               FALSE      FALSE      FALSE
37                          (     TRUE      FALSE      FALSE
38                          x    FALSE      FALSE      FALSE
39                          =    FALSE      FALSE      FALSE
40                      speed    FALSE      FALSE      FALSE
41                               FALSE      FALSE      FALSE
42                          )    FALSE       TRUE      FALSE
43                          +    FALSE      FALSE      FALSE
44                               FALSE      FALSE      FALSE
45                        aes    FALSE      FALSE      FALSE
46                               FALSE      FALSE      FALSE
47                          (     TRUE      FALSE      FALSE
48                          y    FALSE      FALSE      FALSE
49                          =    FALSE      FALSE      FALSE
50                       dist    FALSE      FALSE      FALSE
51                               FALSE      FALSE      FALSE
52                          )    FALSE       TRUE      FALSE
53                          +    FALSE      FALSE      FALSE
54  # Describing what follows    FALSE      FALSE      FALSE
55                               FALSE      FALSE      FALSE
56                 geom_point    FALSE      FALSE      FALSE
57                               FALSE      FALSE      FALSE
58                          (     TRUE      FALSE      FALSE
59                      alpha    FALSE      FALSE      FALSE
60                          =    FALSE      FALSE      FALSE
61                         .3    FALSE      FALSE      FALSE
62                               FALSE      FALSE      FALSE
63                          )    FALSE       TRUE      FALSE
64                          +    FALSE      FALSE      FALSE
65                    #REVEAL    FALSE      FALSE      FALSE
66                               FALSE      FALSE      FALSE
67                 geom_point    FALSE      FALSE      FALSE
68                               FALSE      FALSE      FALSE
69                          (     TRUE      FALSE      FALSE
70                      alpha    FALSE      FALSE      FALSE
71                          =    FALSE      FALSE      FALSE
72                          1    FALSE      FALSE      FALSE
73                               FALSE      FALSE      FALSE
74                          )    FALSE       TRUE      FALSE
75                          +    FALSE      FALSE      FALSE
76                   #REVEAL2    FALSE      FALSE      FALSE
77                               FALSE      FALSE      FALSE
78                geom_jitter    FALSE      FALSE      FALSE
79                               FALSE      FALSE      FALSE
80                          (     TRUE      FALSE      FALSE
81                      alpha    FALSE      FALSE      FALSE
82                          =    FALSE      FALSE      FALSE
83                         .5    FALSE      FALSE      FALSE
84                               FALSE      FALSE      FALSE
85                          )    FALSE       TRUE      FALSE
86                          +    FALSE      FALSE      FALSE
87                   #REVEAL3    FALSE      FALSE      FALSE
88                               FALSE      FALSE      FALSE
89                               FALSE      FALSE      FALSE
90                        aes    FALSE      FALSE      FALSE
91                               FALSE      FALSE      FALSE
92                          (     TRUE      FALSE      FALSE
93                      color    FALSE      FALSE      FALSE
94                          =    FALSE      FALSE      FALSE
95                               FALSE      FALSE      FALSE
96                      speed    FALSE      FALSE      FALSE
97                               FALSE      FALSE      FALSE
98                          &gt;    FALSE      FALSE      FALSE
99                         14    FALSE      FALSE      FALSE
100                              FALSE      FALSE      FALSE
101                         )    FALSE       TRUE      FALSE
102                       %+%    FALSE      FALSE      FALSE
103                      cars    FALSE      FALSE      FALSE
104                              FALSE      FALSE      FALSE
105                        -&gt;    FALSE      FALSE      FALSE
106                   my_plot    FALSE      FALSE      FALSE
107                              FALSE      FALSE      FALSE
108                   #REVEAL    FALSE      FALSE      FALSE
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
    dplyr::mutate(open_curly = text == "{") %&gt;%  
*   dplyr::mutate(closed_curly = text == "}")
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
    line col1 line2 col2  id parent                token terminal
1      1    1    14    9 137      0                 expr    FALSE
2      1    1    13    6 131    137                 expr    FALSE
3      1    1     9   25 105    131                 expr    FALSE
4      1    1     8   23  90    105                 expr    FALSE
5      1    1     7   24  75     90                 expr    FALSE
6      1    1     5   15  59     75                 expr    FALSE
7      1    1     4   16  45     59                 expr    FALSE
8      1    1     3   10  30     45                 expr    FALSE
9      1    1     2   19  20     30                 expr    FALSE
10     1    1     1    4   1      3               SYMBOL     TRUE
11     1    1     1    4   3     20                 expr    FALSE
12     1    6     1    8   2     20              SPECIAL     TRUE
13     1   22     1   40   4     20              COMMENT     TRUE
14     2    3     2   19  18     20                 expr    FALSE
15     2    3     2    8   6      8 SYMBOL_FUNCTION_CALL     TRUE
16     2    3     2    8   8     18                 expr    FALSE
17     2    9     2    9   7     18                  '('     TRUE
18     2   10     2   18  15     18                 expr    FALSE
19     2   10     2   14   9     11               SYMBOL     TRUE
20     2   10     2   14  11     15                 expr    FALSE
21     2   16     2   16  10     15                   GT     TRUE
22     2   18     2   18  12     13            NUM_CONST     TRUE
23     2   18     2   18  13     15                 expr    FALSE
24     2   19     2   19  14     18                  ')'     TRUE
25     2   21     2   23  19     30              SPECIAL     TRUE
26     2   26     2   33  21     30              COMMENT     TRUE
27     3    3     3   10  28     30                 expr    FALSE
28     3    3     3    8  23     25 SYMBOL_FUNCTION_CALL     TRUE
29     3    3     3    8  25     28                 expr    FALSE
30     3    9     3    9  24     28                  '('     TRUE
31     3   10     3   10  26     28                  ')'     TRUE
32     3   12     3   12  29     45                  '+'     TRUE
33     3   27     3   42  31     45              COMMENT     TRUE
34     4    3     4   16  43     45                 expr    FALSE
35     4    3     4    5  33     35 SYMBOL_FUNCTION_CALL     TRUE
36     4    3     4    5  35     43                 expr    FALSE
37     4    6     4    6  34     43                  '('     TRUE
38     4    7     4    7  36     43           SYMBOL_SUB     TRUE
39     4    9     4    9  37     43               EQ_SUB     TRUE
40     4   11     4   15  38     40               SYMBOL     TRUE
41     4   11     4   15  40     43                 expr    FALSE
42     4   16     4   16  39     43                  ')'     TRUE
43     4   18     4   18  44     59                  '+'     TRUE
44     5    3     5   15  57     59                 expr    FALSE
45     5    3     5    5  47     49 SYMBOL_FUNCTION_CALL     TRUE
46     5    3     5    5  49     57                 expr    FALSE
47     5    6     5    6  48     57                  '('     TRUE
48     5    7     5    7  50     57           SYMBOL_SUB     TRUE
49     5    9     5    9  51     57               EQ_SUB     TRUE
50     5   11     5   14  52     54               SYMBOL     TRUE
51     5   11     5   14  54     57                 expr    FALSE
52     5   15     5   15  53     57                  ')'     TRUE
53     5   17     5   17  58     75                  '+'     TRUE
54     6    3     6   27  61     75              COMMENT     TRUE
55     7    3     7   24  73     75                 expr    FALSE
56     7    3     7   12  63     65 SYMBOL_FUNCTION_CALL     TRUE
57     7    3     7   12  65     73                 expr    FALSE
58     7   13     7   13  64     73                  '('     TRUE
59     7   14     7   18  66     73           SYMBOL_SUB     TRUE
60     7   20     7   20  67     73               EQ_SUB     TRUE
61     7   22     7   23  68     69            NUM_CONST     TRUE
62     7   22     7   23  69     73                 expr    FALSE
63     7   24     7   24  70     73                  ')'     TRUE
64     7   26     7   26  74     90                  '+'     TRUE
65     7   28     7   34  76     90              COMMENT     TRUE
66     8    3     8   23  88     90                 expr    FALSE
67     8    3     8   12  78     80 SYMBOL_FUNCTION_CALL     TRUE
68     8    3     8   12  80     88                 expr    FALSE
69     8   13     8   13  79     88                  '('     TRUE
70     8   14     8   18  81     88           SYMBOL_SUB     TRUE
71     8   20     8   20  82     88               EQ_SUB     TRUE
72     8   22     8   22  83     84            NUM_CONST     TRUE
73     8   22     8   22  84     88                 expr    FALSE
74     8   23     8   23  85     88                  ')'     TRUE
75     8   25     8   25  89    105                  '+'     TRUE
76     8   27     8   34  91    105              COMMENT     TRUE
77     9    3     9   25 103    105                 expr    FALSE
78     9    3     9   13  93     95 SYMBOL_FUNCTION_CALL     TRUE
79     9    3     9   13  95    103                 expr    FALSE
80     9   14     9   14  94    103                  '('     TRUE
81     9   15     9   19  96    103           SYMBOL_SUB     TRUE
82     9   21     9   21  97    103               EQ_SUB     TRUE
83     9   23     9   24  98     99            NUM_CONST     TRUE
84     9   23     9   24  99    103                 expr    FALSE
85     9   25     9   25 100    103                  ')'     TRUE
86     9   27     9   27 104    131                  '+'     TRUE
87     9   29     9   36 106    131              COMMENT     TRUE
88    10    3    13    6 130    131                 expr    FALSE
89    10    3    12    3 124    130                 expr    FALSE
90    10    3    10    5 108    110 SYMBOL_FUNCTION_CALL     TRUE
91    10    3    10    5 110    124                 expr    FALSE
92    10    6    10    6 109    124                  '('     TRUE
93    10    7    10   11 111    124           SYMBOL_SUB     TRUE
94    10   13    10   13 112    124               EQ_SUB     TRUE
95    11    3    11   12 121    124                 expr    FALSE
96    11    3    11    7 114    116               SYMBOL     TRUE
97    11    3    11    7 116    121                 expr    FALSE
98    11    9    11    9 115    121                   GT     TRUE
99    11   11    11   12 117    118            NUM_CONST     TRUE
100   11   11    11   12 118    121                 expr    FALSE
101   12    3    12    3 120    124                  ')'     TRUE
102   12    5    12    7 125    130              SPECIAL     TRUE
103   13    3    13    6 127    129               SYMBOL     TRUE
104   13    3    13    6 129    130                 expr    FALSE
105   13    8    13    9 128    137         RIGHT_ASSIGN     TRUE
106   14    3    14    9 133    136               SYMBOL     TRUE
107   14    3    14    9 136    137                 expr    FALSE
108   14   12    14   18 134   -137              COMMENT     TRUE
                         text open_par closed_par open_curly closed_curly
1                                FALSE      FALSE      FALSE        FALSE
2                                FALSE      FALSE      FALSE        FALSE
3                                FALSE      FALSE      FALSE        FALSE
4                                FALSE      FALSE      FALSE        FALSE
5                                FALSE      FALSE      FALSE        FALSE
6                                FALSE      FALSE      FALSE        FALSE
7                                FALSE      FALSE      FALSE        FALSE
8                                FALSE      FALSE      FALSE        FALSE
9                                FALSE      FALSE      FALSE        FALSE
10                       cars    FALSE      FALSE      FALSE        FALSE
11                               FALSE      FALSE      FALSE        FALSE
12                        %&gt;%    FALSE      FALSE      FALSE        FALSE
13        # the data  #REVEAL    FALSE      FALSE      FALSE        FALSE
14                               FALSE      FALSE      FALSE        FALSE
15                     filter    FALSE      FALSE      FALSE        FALSE
16                               FALSE      FALSE      FALSE        FALSE
17                          (     TRUE      FALSE      FALSE        FALSE
18                               FALSE      FALSE      FALSE        FALSE
19                      speed    FALSE      FALSE      FALSE        FALSE
20                               FALSE      FALSE      FALSE        FALSE
21                          &gt;    FALSE      FALSE      FALSE        FALSE
22                          4    FALSE      FALSE      FALSE        FALSE
23                               FALSE      FALSE      FALSE        FALSE
24                          )    FALSE       TRUE      FALSE        FALSE
25                        %&gt;%    FALSE      FALSE      FALSE        FALSE
26                   # subset    FALSE      FALSE      FALSE        FALSE
27                               FALSE      FALSE      FALSE        FALSE
28                     ggplot    FALSE      FALSE      FALSE        FALSE
29                               FALSE      FALSE      FALSE        FALSE
30                          (     TRUE      FALSE      FALSE        FALSE
31                          )    FALSE       TRUE      FALSE        FALSE
32                          +    FALSE      FALSE      FALSE        FALSE
33           # pipe to ggplot    FALSE      FALSE      FALSE        FALSE
34                               FALSE      FALSE      FALSE        FALSE
35                        aes    FALSE      FALSE      FALSE        FALSE
36                               FALSE      FALSE      FALSE        FALSE
37                          (     TRUE      FALSE      FALSE        FALSE
38                          x    FALSE      FALSE      FALSE        FALSE
39                          =    FALSE      FALSE      FALSE        FALSE
40                      speed    FALSE      FALSE      FALSE        FALSE
41                               FALSE      FALSE      FALSE        FALSE
42                          )    FALSE       TRUE      FALSE        FALSE
43                          +    FALSE      FALSE      FALSE        FALSE
44                               FALSE      FALSE      FALSE        FALSE
45                        aes    FALSE      FALSE      FALSE        FALSE
46                               FALSE      FALSE      FALSE        FALSE
47                          (     TRUE      FALSE      FALSE        FALSE
48                          y    FALSE      FALSE      FALSE        FALSE
49                          =    FALSE      FALSE      FALSE        FALSE
50                       dist    FALSE      FALSE      FALSE        FALSE
51                               FALSE      FALSE      FALSE        FALSE
52                          )    FALSE       TRUE      FALSE        FALSE
53                          +    FALSE      FALSE      FALSE        FALSE
54  # Describing what follows    FALSE      FALSE      FALSE        FALSE
55                               FALSE      FALSE      FALSE        FALSE
56                 geom_point    FALSE      FALSE      FALSE        FALSE
57                               FALSE      FALSE      FALSE        FALSE
58                          (     TRUE      FALSE      FALSE        FALSE
59                      alpha    FALSE      FALSE      FALSE        FALSE
60                          =    FALSE      FALSE      FALSE        FALSE
61                         .3    FALSE      FALSE      FALSE        FALSE
62                               FALSE      FALSE      FALSE        FALSE
63                          )    FALSE       TRUE      FALSE        FALSE
64                          +    FALSE      FALSE      FALSE        FALSE
65                    #REVEAL    FALSE      FALSE      FALSE        FALSE
66                               FALSE      FALSE      FALSE        FALSE
67                 geom_point    FALSE      FALSE      FALSE        FALSE
68                               FALSE      FALSE      FALSE        FALSE
69                          (     TRUE      FALSE      FALSE        FALSE
70                      alpha    FALSE      FALSE      FALSE        FALSE
71                          =    FALSE      FALSE      FALSE        FALSE
72                          1    FALSE      FALSE      FALSE        FALSE
73                               FALSE      FALSE      FALSE        FALSE
74                          )    FALSE       TRUE      FALSE        FALSE
75                          +    FALSE      FALSE      FALSE        FALSE
76                   #REVEAL2    FALSE      FALSE      FALSE        FALSE
77                               FALSE      FALSE      FALSE        FALSE
78                geom_jitter    FALSE      FALSE      FALSE        FALSE
79                               FALSE      FALSE      FALSE        FALSE
80                          (     TRUE      FALSE      FALSE        FALSE
81                      alpha    FALSE      FALSE      FALSE        FALSE
82                          =    FALSE      FALSE      FALSE        FALSE
83                         .5    FALSE      FALSE      FALSE        FALSE
84                               FALSE      FALSE      FALSE        FALSE
85                          )    FALSE       TRUE      FALSE        FALSE
86                          +    FALSE      FALSE      FALSE        FALSE
87                   #REVEAL3    FALSE      FALSE      FALSE        FALSE
88                               FALSE      FALSE      FALSE        FALSE
89                               FALSE      FALSE      FALSE        FALSE
90                        aes    FALSE      FALSE      FALSE        FALSE
91                               FALSE      FALSE      FALSE        FALSE
92                          (     TRUE      FALSE      FALSE        FALSE
93                      color    FALSE      FALSE      FALSE        FALSE
94                          =    FALSE      FALSE      FALSE        FALSE
95                               FALSE      FALSE      FALSE        FALSE
96                      speed    FALSE      FALSE      FALSE        FALSE
97                               FALSE      FALSE      FALSE        FALSE
98                          &gt;    FALSE      FALSE      FALSE        FALSE
99                         14    FALSE      FALSE      FALSE        FALSE
100                              FALSE      FALSE      FALSE        FALSE
101                         )    FALSE       TRUE      FALSE        FALSE
102                       %+%    FALSE      FALSE      FALSE        FALSE
103                      cars    FALSE      FALSE      FALSE        FALSE
104                              FALSE      FALSE      FALSE        FALSE
105                        -&gt;    FALSE      FALSE      FALSE        FALSE
106                   my_plot    FALSE      FALSE      FALSE        FALSE
107                              FALSE      FALSE      FALSE        FALSE
108                   #REVEAL    FALSE      FALSE      FALSE        FALSE
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
    dplyr::mutate(open_curly = text == "{") %&gt;%  
    dplyr::mutate(closed_curly = text == "}") %&gt;%  
*   dplyr::mutate(open_square = text == "[")
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
    line col1 line2 col2  id parent                token terminal
1      1    1    14    9 137      0                 expr    FALSE
2      1    1    13    6 131    137                 expr    FALSE
3      1    1     9   25 105    131                 expr    FALSE
4      1    1     8   23  90    105                 expr    FALSE
5      1    1     7   24  75     90                 expr    FALSE
6      1    1     5   15  59     75                 expr    FALSE
7      1    1     4   16  45     59                 expr    FALSE
8      1    1     3   10  30     45                 expr    FALSE
9      1    1     2   19  20     30                 expr    FALSE
10     1    1     1    4   1      3               SYMBOL     TRUE
11     1    1     1    4   3     20                 expr    FALSE
12     1    6     1    8   2     20              SPECIAL     TRUE
13     1   22     1   40   4     20              COMMENT     TRUE
14     2    3     2   19  18     20                 expr    FALSE
15     2    3     2    8   6      8 SYMBOL_FUNCTION_CALL     TRUE
16     2    3     2    8   8     18                 expr    FALSE
17     2    9     2    9   7     18                  '('     TRUE
18     2   10     2   18  15     18                 expr    FALSE
19     2   10     2   14   9     11               SYMBOL     TRUE
20     2   10     2   14  11     15                 expr    FALSE
21     2   16     2   16  10     15                   GT     TRUE
22     2   18     2   18  12     13            NUM_CONST     TRUE
23     2   18     2   18  13     15                 expr    FALSE
24     2   19     2   19  14     18                  ')'     TRUE
25     2   21     2   23  19     30              SPECIAL     TRUE
26     2   26     2   33  21     30              COMMENT     TRUE
27     3    3     3   10  28     30                 expr    FALSE
28     3    3     3    8  23     25 SYMBOL_FUNCTION_CALL     TRUE
29     3    3     3    8  25     28                 expr    FALSE
30     3    9     3    9  24     28                  '('     TRUE
31     3   10     3   10  26     28                  ')'     TRUE
32     3   12     3   12  29     45                  '+'     TRUE
33     3   27     3   42  31     45              COMMENT     TRUE
34     4    3     4   16  43     45                 expr    FALSE
35     4    3     4    5  33     35 SYMBOL_FUNCTION_CALL     TRUE
36     4    3     4    5  35     43                 expr    FALSE
37     4    6     4    6  34     43                  '('     TRUE
38     4    7     4    7  36     43           SYMBOL_SUB     TRUE
39     4    9     4    9  37     43               EQ_SUB     TRUE
40     4   11     4   15  38     40               SYMBOL     TRUE
41     4   11     4   15  40     43                 expr    FALSE
42     4   16     4   16  39     43                  ')'     TRUE
43     4   18     4   18  44     59                  '+'     TRUE
44     5    3     5   15  57     59                 expr    FALSE
45     5    3     5    5  47     49 SYMBOL_FUNCTION_CALL     TRUE
46     5    3     5    5  49     57                 expr    FALSE
47     5    6     5    6  48     57                  '('     TRUE
48     5    7     5    7  50     57           SYMBOL_SUB     TRUE
49     5    9     5    9  51     57               EQ_SUB     TRUE
50     5   11     5   14  52     54               SYMBOL     TRUE
51     5   11     5   14  54     57                 expr    FALSE
52     5   15     5   15  53     57                  ')'     TRUE
53     5   17     5   17  58     75                  '+'     TRUE
54     6    3     6   27  61     75              COMMENT     TRUE
55     7    3     7   24  73     75                 expr    FALSE
56     7    3     7   12  63     65 SYMBOL_FUNCTION_CALL     TRUE
57     7    3     7   12  65     73                 expr    FALSE
58     7   13     7   13  64     73                  '('     TRUE
59     7   14     7   18  66     73           SYMBOL_SUB     TRUE
60     7   20     7   20  67     73               EQ_SUB     TRUE
61     7   22     7   23  68     69            NUM_CONST     TRUE
62     7   22     7   23  69     73                 expr    FALSE
63     7   24     7   24  70     73                  ')'     TRUE
64     7   26     7   26  74     90                  '+'     TRUE
65     7   28     7   34  76     90              COMMENT     TRUE
66     8    3     8   23  88     90                 expr    FALSE
67     8    3     8   12  78     80 SYMBOL_FUNCTION_CALL     TRUE
68     8    3     8   12  80     88                 expr    FALSE
69     8   13     8   13  79     88                  '('     TRUE
70     8   14     8   18  81     88           SYMBOL_SUB     TRUE
71     8   20     8   20  82     88               EQ_SUB     TRUE
72     8   22     8   22  83     84            NUM_CONST     TRUE
73     8   22     8   22  84     88                 expr    FALSE
74     8   23     8   23  85     88                  ')'     TRUE
75     8   25     8   25  89    105                  '+'     TRUE
76     8   27     8   34  91    105              COMMENT     TRUE
77     9    3     9   25 103    105                 expr    FALSE
78     9    3     9   13  93     95 SYMBOL_FUNCTION_CALL     TRUE
79     9    3     9   13  95    103                 expr    FALSE
80     9   14     9   14  94    103                  '('     TRUE
81     9   15     9   19  96    103           SYMBOL_SUB     TRUE
82     9   21     9   21  97    103               EQ_SUB     TRUE
83     9   23     9   24  98     99            NUM_CONST     TRUE
84     9   23     9   24  99    103                 expr    FALSE
85     9   25     9   25 100    103                  ')'     TRUE
86     9   27     9   27 104    131                  '+'     TRUE
87     9   29     9   36 106    131              COMMENT     TRUE
88    10    3    13    6 130    131                 expr    FALSE
89    10    3    12    3 124    130                 expr    FALSE
90    10    3    10    5 108    110 SYMBOL_FUNCTION_CALL     TRUE
91    10    3    10    5 110    124                 expr    FALSE
92    10    6    10    6 109    124                  '('     TRUE
93    10    7    10   11 111    124           SYMBOL_SUB     TRUE
94    10   13    10   13 112    124               EQ_SUB     TRUE
95    11    3    11   12 121    124                 expr    FALSE
96    11    3    11    7 114    116               SYMBOL     TRUE
97    11    3    11    7 116    121                 expr    FALSE
98    11    9    11    9 115    121                   GT     TRUE
99    11   11    11   12 117    118            NUM_CONST     TRUE
100   11   11    11   12 118    121                 expr    FALSE
101   12    3    12    3 120    124                  ')'     TRUE
102   12    5    12    7 125    130              SPECIAL     TRUE
103   13    3    13    6 127    129               SYMBOL     TRUE
104   13    3    13    6 129    130                 expr    FALSE
105   13    8    13    9 128    137         RIGHT_ASSIGN     TRUE
106   14    3    14    9 133    136               SYMBOL     TRUE
107   14    3    14    9 136    137                 expr    FALSE
108   14   12    14   18 134   -137              COMMENT     TRUE
                         text open_par closed_par open_curly closed_curly
1                                FALSE      FALSE      FALSE        FALSE
2                                FALSE      FALSE      FALSE        FALSE
3                                FALSE      FALSE      FALSE        FALSE
4                                FALSE      FALSE      FALSE        FALSE
5                                FALSE      FALSE      FALSE        FALSE
6                                FALSE      FALSE      FALSE        FALSE
7                                FALSE      FALSE      FALSE        FALSE
8                                FALSE      FALSE      FALSE        FALSE
9                                FALSE      FALSE      FALSE        FALSE
10                       cars    FALSE      FALSE      FALSE        FALSE
11                               FALSE      FALSE      FALSE        FALSE
12                        %&gt;%    FALSE      FALSE      FALSE        FALSE
13        # the data  #REVEAL    FALSE      FALSE      FALSE        FALSE
14                               FALSE      FALSE      FALSE        FALSE
15                     filter    FALSE      FALSE      FALSE        FALSE
16                               FALSE      FALSE      FALSE        FALSE
17                          (     TRUE      FALSE      FALSE        FALSE
18                               FALSE      FALSE      FALSE        FALSE
19                      speed    FALSE      FALSE      FALSE        FALSE
20                               FALSE      FALSE      FALSE        FALSE
21                          &gt;    FALSE      FALSE      FALSE        FALSE
22                          4    FALSE      FALSE      FALSE        FALSE
23                               FALSE      FALSE      FALSE        FALSE
24                          )    FALSE       TRUE      FALSE        FALSE
25                        %&gt;%    FALSE      FALSE      FALSE        FALSE
26                   # subset    FALSE      FALSE      FALSE        FALSE
27                               FALSE      FALSE      FALSE        FALSE
28                     ggplot    FALSE      FALSE      FALSE        FALSE
29                               FALSE      FALSE      FALSE        FALSE
30                          (     TRUE      FALSE      FALSE        FALSE
31                          )    FALSE       TRUE      FALSE        FALSE
32                          +    FALSE      FALSE      FALSE        FALSE
33           # pipe to ggplot    FALSE      FALSE      FALSE        FALSE
34                               FALSE      FALSE      FALSE        FALSE
35                        aes    FALSE      FALSE      FALSE        FALSE
36                               FALSE      FALSE      FALSE        FALSE
37                          (     TRUE      FALSE      FALSE        FALSE
38                          x    FALSE      FALSE      FALSE        FALSE
39                          =    FALSE      FALSE      FALSE        FALSE
40                      speed    FALSE      FALSE      FALSE        FALSE
41                               FALSE      FALSE      FALSE        FALSE
42                          )    FALSE       TRUE      FALSE        FALSE
43                          +    FALSE      FALSE      FALSE        FALSE
44                               FALSE      FALSE      FALSE        FALSE
45                        aes    FALSE      FALSE      FALSE        FALSE
46                               FALSE      FALSE      FALSE        FALSE
47                          (     TRUE      FALSE      FALSE        FALSE
48                          y    FALSE      FALSE      FALSE        FALSE
49                          =    FALSE      FALSE      FALSE        FALSE
50                       dist    FALSE      FALSE      FALSE        FALSE
51                               FALSE      FALSE      FALSE        FALSE
52                          )    FALSE       TRUE      FALSE        FALSE
53                          +    FALSE      FALSE      FALSE        FALSE
54  # Describing what follows    FALSE      FALSE      FALSE        FALSE
55                               FALSE      FALSE      FALSE        FALSE
56                 geom_point    FALSE      FALSE      FALSE        FALSE
57                               FALSE      FALSE      FALSE        FALSE
58                          (     TRUE      FALSE      FALSE        FALSE
59                      alpha    FALSE      FALSE      FALSE        FALSE
60                          =    FALSE      FALSE      FALSE        FALSE
61                         .3    FALSE      FALSE      FALSE        FALSE
62                               FALSE      FALSE      FALSE        FALSE
63                          )    FALSE       TRUE      FALSE        FALSE
64                          +    FALSE      FALSE      FALSE        FALSE
65                    #REVEAL    FALSE      FALSE      FALSE        FALSE
66                               FALSE      FALSE      FALSE        FALSE
67                 geom_point    FALSE      FALSE      FALSE        FALSE
68                               FALSE      FALSE      FALSE        FALSE
69                          (     TRUE      FALSE      FALSE        FALSE
70                      alpha    FALSE      FALSE      FALSE        FALSE
71                          =    FALSE      FALSE      FALSE        FALSE
72                          1    FALSE      FALSE      FALSE        FALSE
73                               FALSE      FALSE      FALSE        FALSE
74                          )    FALSE       TRUE      FALSE        FALSE
75                          +    FALSE      FALSE      FALSE        FALSE
76                   #REVEAL2    FALSE      FALSE      FALSE        FALSE
77                               FALSE      FALSE      FALSE        FALSE
78                geom_jitter    FALSE      FALSE      FALSE        FALSE
79                               FALSE      FALSE      FALSE        FALSE
80                          (     TRUE      FALSE      FALSE        FALSE
81                      alpha    FALSE      FALSE      FALSE        FALSE
82                          =    FALSE      FALSE      FALSE        FALSE
83                         .5    FALSE      FALSE      FALSE        FALSE
84                               FALSE      FALSE      FALSE        FALSE
85                          )    FALSE       TRUE      FALSE        FALSE
86                          +    FALSE      FALSE      FALSE        FALSE
87                   #REVEAL3    FALSE      FALSE      FALSE        FALSE
88                               FALSE      FALSE      FALSE        FALSE
89                               FALSE      FALSE      FALSE        FALSE
90                        aes    FALSE      FALSE      FALSE        FALSE
91                               FALSE      FALSE      FALSE        FALSE
92                          (     TRUE      FALSE      FALSE        FALSE
93                      color    FALSE      FALSE      FALSE        FALSE
94                          =    FALSE      FALSE      FALSE        FALSE
95                               FALSE      FALSE      FALSE        FALSE
96                      speed    FALSE      FALSE      FALSE        FALSE
97                               FALSE      FALSE      FALSE        FALSE
98                          &gt;    FALSE      FALSE      FALSE        FALSE
99                         14    FALSE      FALSE      FALSE        FALSE
100                              FALSE      FALSE      FALSE        FALSE
101                         )    FALSE       TRUE      FALSE        FALSE
102                       %+%    FALSE      FALSE      FALSE        FALSE
103                      cars    FALSE      FALSE      FALSE        FALSE
104                              FALSE      FALSE      FALSE        FALSE
105                        -&gt;    FALSE      FALSE      FALSE        FALSE
106                   my_plot    FALSE      FALSE      FALSE        FALSE
107                              FALSE      FALSE      FALSE        FALSE
108                   #REVEAL    FALSE      FALSE      FALSE        FALSE
    open_square
1         FALSE
2         FALSE
3         FALSE
4         FALSE
5         FALSE
6         FALSE
7         FALSE
8         FALSE
9         FALSE
10        FALSE
11        FALSE
12        FALSE
13        FALSE
14        FALSE
15        FALSE
16        FALSE
17        FALSE
18        FALSE
19        FALSE
20        FALSE
21        FALSE
22        FALSE
23        FALSE
24        FALSE
25        FALSE
26        FALSE
27        FALSE
28        FALSE
29        FALSE
30        FALSE
31        FALSE
32        FALSE
33        FALSE
34        FALSE
35        FALSE
36        FALSE
37        FALSE
38        FALSE
39        FALSE
40        FALSE
41        FALSE
42        FALSE
43        FALSE
44        FALSE
45        FALSE
46        FALSE
47        FALSE
48        FALSE
49        FALSE
50        FALSE
51        FALSE
52        FALSE
53        FALSE
54        FALSE
55        FALSE
56        FALSE
57        FALSE
58        FALSE
59        FALSE
60        FALSE
61        FALSE
62        FALSE
63        FALSE
64        FALSE
65        FALSE
66        FALSE
67        FALSE
68        FALSE
69        FALSE
70        FALSE
71        FALSE
72        FALSE
73        FALSE
74        FALSE
75        FALSE
76        FALSE
77        FALSE
78        FALSE
79        FALSE
80        FALSE
81        FALSE
82        FALSE
83        FALSE
84        FALSE
85        FALSE
86        FALSE
87        FALSE
88        FALSE
89        FALSE
90        FALSE
91        FALSE
92        FALSE
93        FALSE
94        FALSE
95        FALSE
96        FALSE
97        FALSE
98        FALSE
99        FALSE
100       FALSE
101       FALSE
102       FALSE
103       FALSE
104       FALSE
105       FALSE
106       FALSE
107       FALSE
108       FALSE
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
    dplyr::mutate(open_curly = text == "{") %&gt;%  
    dplyr::mutate(closed_curly = text == "}") %&gt;%  
    dplyr::mutate(open_square = text == "[") %&gt;%  
*   dplyr::mutate(open_square = ifelse(text == "[[", 2, open_square))
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
    line col1 line2 col2  id parent                token terminal
1      1    1    14    9 137      0                 expr    FALSE
2      1    1    13    6 131    137                 expr    FALSE
3      1    1     9   25 105    131                 expr    FALSE
4      1    1     8   23  90    105                 expr    FALSE
5      1    1     7   24  75     90                 expr    FALSE
6      1    1     5   15  59     75                 expr    FALSE
7      1    1     4   16  45     59                 expr    FALSE
8      1    1     3   10  30     45                 expr    FALSE
9      1    1     2   19  20     30                 expr    FALSE
10     1    1     1    4   1      3               SYMBOL     TRUE
11     1    1     1    4   3     20                 expr    FALSE
12     1    6     1    8   2     20              SPECIAL     TRUE
13     1   22     1   40   4     20              COMMENT     TRUE
14     2    3     2   19  18     20                 expr    FALSE
15     2    3     2    8   6      8 SYMBOL_FUNCTION_CALL     TRUE
16     2    3     2    8   8     18                 expr    FALSE
17     2    9     2    9   7     18                  '('     TRUE
18     2   10     2   18  15     18                 expr    FALSE
19     2   10     2   14   9     11               SYMBOL     TRUE
20     2   10     2   14  11     15                 expr    FALSE
21     2   16     2   16  10     15                   GT     TRUE
22     2   18     2   18  12     13            NUM_CONST     TRUE
23     2   18     2   18  13     15                 expr    FALSE
24     2   19     2   19  14     18                  ')'     TRUE
25     2   21     2   23  19     30              SPECIAL     TRUE
26     2   26     2   33  21     30              COMMENT     TRUE
27     3    3     3   10  28     30                 expr    FALSE
28     3    3     3    8  23     25 SYMBOL_FUNCTION_CALL     TRUE
29     3    3     3    8  25     28                 expr    FALSE
30     3    9     3    9  24     28                  '('     TRUE
31     3   10     3   10  26     28                  ')'     TRUE
32     3   12     3   12  29     45                  '+'     TRUE
33     3   27     3   42  31     45              COMMENT     TRUE
34     4    3     4   16  43     45                 expr    FALSE
35     4    3     4    5  33     35 SYMBOL_FUNCTION_CALL     TRUE
36     4    3     4    5  35     43                 expr    FALSE
37     4    6     4    6  34     43                  '('     TRUE
38     4    7     4    7  36     43           SYMBOL_SUB     TRUE
39     4    9     4    9  37     43               EQ_SUB     TRUE
40     4   11     4   15  38     40               SYMBOL     TRUE
41     4   11     4   15  40     43                 expr    FALSE
42     4   16     4   16  39     43                  ')'     TRUE
43     4   18     4   18  44     59                  '+'     TRUE
44     5    3     5   15  57     59                 expr    FALSE
45     5    3     5    5  47     49 SYMBOL_FUNCTION_CALL     TRUE
46     5    3     5    5  49     57                 expr    FALSE
47     5    6     5    6  48     57                  '('     TRUE
48     5    7     5    7  50     57           SYMBOL_SUB     TRUE
49     5    9     5    9  51     57               EQ_SUB     TRUE
50     5   11     5   14  52     54               SYMBOL     TRUE
51     5   11     5   14  54     57                 expr    FALSE
52     5   15     5   15  53     57                  ')'     TRUE
53     5   17     5   17  58     75                  '+'     TRUE
54     6    3     6   27  61     75              COMMENT     TRUE
55     7    3     7   24  73     75                 expr    FALSE
56     7    3     7   12  63     65 SYMBOL_FUNCTION_CALL     TRUE
57     7    3     7   12  65     73                 expr    FALSE
58     7   13     7   13  64     73                  '('     TRUE
59     7   14     7   18  66     73           SYMBOL_SUB     TRUE
60     7   20     7   20  67     73               EQ_SUB     TRUE
61     7   22     7   23  68     69            NUM_CONST     TRUE
62     7   22     7   23  69     73                 expr    FALSE
63     7   24     7   24  70     73                  ')'     TRUE
64     7   26     7   26  74     90                  '+'     TRUE
65     7   28     7   34  76     90              COMMENT     TRUE
66     8    3     8   23  88     90                 expr    FALSE
67     8    3     8   12  78     80 SYMBOL_FUNCTION_CALL     TRUE
68     8    3     8   12  80     88                 expr    FALSE
69     8   13     8   13  79     88                  '('     TRUE
70     8   14     8   18  81     88           SYMBOL_SUB     TRUE
71     8   20     8   20  82     88               EQ_SUB     TRUE
72     8   22     8   22  83     84            NUM_CONST     TRUE
73     8   22     8   22  84     88                 expr    FALSE
74     8   23     8   23  85     88                  ')'     TRUE
75     8   25     8   25  89    105                  '+'     TRUE
76     8   27     8   34  91    105              COMMENT     TRUE
77     9    3     9   25 103    105                 expr    FALSE
78     9    3     9   13  93     95 SYMBOL_FUNCTION_CALL     TRUE
79     9    3     9   13  95    103                 expr    FALSE
80     9   14     9   14  94    103                  '('     TRUE
81     9   15     9   19  96    103           SYMBOL_SUB     TRUE
82     9   21     9   21  97    103               EQ_SUB     TRUE
83     9   23     9   24  98     99            NUM_CONST     TRUE
84     9   23     9   24  99    103                 expr    FALSE
85     9   25     9   25 100    103                  ')'     TRUE
86     9   27     9   27 104    131                  '+'     TRUE
87     9   29     9   36 106    131              COMMENT     TRUE
88    10    3    13    6 130    131                 expr    FALSE
89    10    3    12    3 124    130                 expr    FALSE
90    10    3    10    5 108    110 SYMBOL_FUNCTION_CALL     TRUE
91    10    3    10    5 110    124                 expr    FALSE
92    10    6    10    6 109    124                  '('     TRUE
93    10    7    10   11 111    124           SYMBOL_SUB     TRUE
94    10   13    10   13 112    124               EQ_SUB     TRUE
95    11    3    11   12 121    124                 expr    FALSE
96    11    3    11    7 114    116               SYMBOL     TRUE
97    11    3    11    7 116    121                 expr    FALSE
98    11    9    11    9 115    121                   GT     TRUE
99    11   11    11   12 117    118            NUM_CONST     TRUE
100   11   11    11   12 118    121                 expr    FALSE
101   12    3    12    3 120    124                  ')'     TRUE
102   12    5    12    7 125    130              SPECIAL     TRUE
103   13    3    13    6 127    129               SYMBOL     TRUE
104   13    3    13    6 129    130                 expr    FALSE
105   13    8    13    9 128    137         RIGHT_ASSIGN     TRUE
106   14    3    14    9 133    136               SYMBOL     TRUE
107   14    3    14    9 136    137                 expr    FALSE
108   14   12    14   18 134   -137              COMMENT     TRUE
                         text open_par closed_par open_curly closed_curly
1                                FALSE      FALSE      FALSE        FALSE
2                                FALSE      FALSE      FALSE        FALSE
3                                FALSE      FALSE      FALSE        FALSE
4                                FALSE      FALSE      FALSE        FALSE
5                                FALSE      FALSE      FALSE        FALSE
6                                FALSE      FALSE      FALSE        FALSE
7                                FALSE      FALSE      FALSE        FALSE
8                                FALSE      FALSE      FALSE        FALSE
9                                FALSE      FALSE      FALSE        FALSE
10                       cars    FALSE      FALSE      FALSE        FALSE
11                               FALSE      FALSE      FALSE        FALSE
12                        %&gt;%    FALSE      FALSE      FALSE        FALSE
13        # the data  #REVEAL    FALSE      FALSE      FALSE        FALSE
14                               FALSE      FALSE      FALSE        FALSE
15                     filter    FALSE      FALSE      FALSE        FALSE
16                               FALSE      FALSE      FALSE        FALSE
17                          (     TRUE      FALSE      FALSE        FALSE
18                               FALSE      FALSE      FALSE        FALSE
19                      speed    FALSE      FALSE      FALSE        FALSE
20                               FALSE      FALSE      FALSE        FALSE
21                          &gt;    FALSE      FALSE      FALSE        FALSE
22                          4    FALSE      FALSE      FALSE        FALSE
23                               FALSE      FALSE      FALSE        FALSE
24                          )    FALSE       TRUE      FALSE        FALSE
25                        %&gt;%    FALSE      FALSE      FALSE        FALSE
26                   # subset    FALSE      FALSE      FALSE        FALSE
27                               FALSE      FALSE      FALSE        FALSE
28                     ggplot    FALSE      FALSE      FALSE        FALSE
29                               FALSE      FALSE      FALSE        FALSE
30                          (     TRUE      FALSE      FALSE        FALSE
31                          )    FALSE       TRUE      FALSE        FALSE
32                          +    FALSE      FALSE      FALSE        FALSE
33           # pipe to ggplot    FALSE      FALSE      FALSE        FALSE
34                               FALSE      FALSE      FALSE        FALSE
35                        aes    FALSE      FALSE      FALSE        FALSE
36                               FALSE      FALSE      FALSE        FALSE
37                          (     TRUE      FALSE      FALSE        FALSE
38                          x    FALSE      FALSE      FALSE        FALSE
39                          =    FALSE      FALSE      FALSE        FALSE
40                      speed    FALSE      FALSE      FALSE        FALSE
41                               FALSE      FALSE      FALSE        FALSE
42                          )    FALSE       TRUE      FALSE        FALSE
43                          +    FALSE      FALSE      FALSE        FALSE
44                               FALSE      FALSE      FALSE        FALSE
45                        aes    FALSE      FALSE      FALSE        FALSE
46                               FALSE      FALSE      FALSE        FALSE
47                          (     TRUE      FALSE      FALSE        FALSE
48                          y    FALSE      FALSE      FALSE        FALSE
49                          =    FALSE      FALSE      FALSE        FALSE
50                       dist    FALSE      FALSE      FALSE        FALSE
51                               FALSE      FALSE      FALSE        FALSE
52                          )    FALSE       TRUE      FALSE        FALSE
53                          +    FALSE      FALSE      FALSE        FALSE
54  # Describing what follows    FALSE      FALSE      FALSE        FALSE
55                               FALSE      FALSE      FALSE        FALSE
56                 geom_point    FALSE      FALSE      FALSE        FALSE
57                               FALSE      FALSE      FALSE        FALSE
58                          (     TRUE      FALSE      FALSE        FALSE
59                      alpha    FALSE      FALSE      FALSE        FALSE
60                          =    FALSE      FALSE      FALSE        FALSE
61                         .3    FALSE      FALSE      FALSE        FALSE
62                               FALSE      FALSE      FALSE        FALSE
63                          )    FALSE       TRUE      FALSE        FALSE
64                          +    FALSE      FALSE      FALSE        FALSE
65                    #REVEAL    FALSE      FALSE      FALSE        FALSE
66                               FALSE      FALSE      FALSE        FALSE
67                 geom_point    FALSE      FALSE      FALSE        FALSE
68                               FALSE      FALSE      FALSE        FALSE
69                          (     TRUE      FALSE      FALSE        FALSE
70                      alpha    FALSE      FALSE      FALSE        FALSE
71                          =    FALSE      FALSE      FALSE        FALSE
72                          1    FALSE      FALSE      FALSE        FALSE
73                               FALSE      FALSE      FALSE        FALSE
74                          )    FALSE       TRUE      FALSE        FALSE
75                          +    FALSE      FALSE      FALSE        FALSE
76                   #REVEAL2    FALSE      FALSE      FALSE        FALSE
77                               FALSE      FALSE      FALSE        FALSE
78                geom_jitter    FALSE      FALSE      FALSE        FALSE
79                               FALSE      FALSE      FALSE        FALSE
80                          (     TRUE      FALSE      FALSE        FALSE
81                      alpha    FALSE      FALSE      FALSE        FALSE
82                          =    FALSE      FALSE      FALSE        FALSE
83                         .5    FALSE      FALSE      FALSE        FALSE
84                               FALSE      FALSE      FALSE        FALSE
85                          )    FALSE       TRUE      FALSE        FALSE
86                          +    FALSE      FALSE      FALSE        FALSE
87                   #REVEAL3    FALSE      FALSE      FALSE        FALSE
88                               FALSE      FALSE      FALSE        FALSE
89                               FALSE      FALSE      FALSE        FALSE
90                        aes    FALSE      FALSE      FALSE        FALSE
91                               FALSE      FALSE      FALSE        FALSE
92                          (     TRUE      FALSE      FALSE        FALSE
93                      color    FALSE      FALSE      FALSE        FALSE
94                          =    FALSE      FALSE      FALSE        FALSE
95                               FALSE      FALSE      FALSE        FALSE
96                      speed    FALSE      FALSE      FALSE        FALSE
97                               FALSE      FALSE      FALSE        FALSE
98                          &gt;    FALSE      FALSE      FALSE        FALSE
99                         14    FALSE      FALSE      FALSE        FALSE
100                              FALSE      FALSE      FALSE        FALSE
101                         )    FALSE       TRUE      FALSE        FALSE
102                       %+%    FALSE      FALSE      FALSE        FALSE
103                      cars    FALSE      FALSE      FALSE        FALSE
104                              FALSE      FALSE      FALSE        FALSE
105                        -&gt;    FALSE      FALSE      FALSE        FALSE
106                   my_plot    FALSE      FALSE      FALSE        FALSE
107                              FALSE      FALSE      FALSE        FALSE
108                   #REVEAL    FALSE      FALSE      FALSE        FALSE
    open_square
1         FALSE
2         FALSE
3         FALSE
4         FALSE
5         FALSE
6         FALSE
7         FALSE
8         FALSE
9         FALSE
10        FALSE
11        FALSE
12        FALSE
13        FALSE
14        FALSE
15        FALSE
16        FALSE
17        FALSE
18        FALSE
19        FALSE
20        FALSE
21        FALSE
22        FALSE
23        FALSE
24        FALSE
25        FALSE
26        FALSE
27        FALSE
28        FALSE
29        FALSE
30        FALSE
31        FALSE
32        FALSE
33        FALSE
34        FALSE
35        FALSE
36        FALSE
37        FALSE
38        FALSE
39        FALSE
40        FALSE
41        FALSE
42        FALSE
43        FALSE
44        FALSE
45        FALSE
46        FALSE
47        FALSE
48        FALSE
49        FALSE
50        FALSE
51        FALSE
52        FALSE
53        FALSE
54        FALSE
55        FALSE
56        FALSE
57        FALSE
58        FALSE
59        FALSE
60        FALSE
61        FALSE
62        FALSE
63        FALSE
64        FALSE
65        FALSE
66        FALSE
67        FALSE
68        FALSE
69        FALSE
70        FALSE
71        FALSE
72        FALSE
73        FALSE
74        FALSE
75        FALSE
76        FALSE
77        FALSE
78        FALSE
79        FALSE
80        FALSE
81        FALSE
82        FALSE
83        FALSE
84        FALSE
85        FALSE
86        FALSE
87        FALSE
88        FALSE
89        FALSE
90        FALSE
91        FALSE
92        FALSE
93        FALSE
94        FALSE
95        FALSE
96        FALSE
97        FALSE
98        FALSE
99        FALSE
100       FALSE
101       FALSE
102       FALSE
103       FALSE
104       FALSE
105       FALSE
106       FALSE
107       FALSE
108       FALSE
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
    dplyr::mutate(open_curly = text == "{") %&gt;%  
    dplyr::mutate(closed_curly = text == "}") %&gt;%  
    dplyr::mutate(open_square = text == "[") %&gt;%  
    dplyr::mutate(open_square = ifelse(text == "[[", 2, open_square)) %&gt;%  
*   dplyr::mutate(closed_square = text == "]")
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
    line col1 line2 col2  id parent                token terminal
1      1    1    14    9 137      0                 expr    FALSE
2      1    1    13    6 131    137                 expr    FALSE
3      1    1     9   25 105    131                 expr    FALSE
4      1    1     8   23  90    105                 expr    FALSE
5      1    1     7   24  75     90                 expr    FALSE
6      1    1     5   15  59     75                 expr    FALSE
7      1    1     4   16  45     59                 expr    FALSE
8      1    1     3   10  30     45                 expr    FALSE
9      1    1     2   19  20     30                 expr    FALSE
10     1    1     1    4   1      3               SYMBOL     TRUE
11     1    1     1    4   3     20                 expr    FALSE
12     1    6     1    8   2     20              SPECIAL     TRUE
13     1   22     1   40   4     20              COMMENT     TRUE
14     2    3     2   19  18     20                 expr    FALSE
15     2    3     2    8   6      8 SYMBOL_FUNCTION_CALL     TRUE
16     2    3     2    8   8     18                 expr    FALSE
17     2    9     2    9   7     18                  '('     TRUE
18     2   10     2   18  15     18                 expr    FALSE
19     2   10     2   14   9     11               SYMBOL     TRUE
20     2   10     2   14  11     15                 expr    FALSE
21     2   16     2   16  10     15                   GT     TRUE
22     2   18     2   18  12     13            NUM_CONST     TRUE
23     2   18     2   18  13     15                 expr    FALSE
24     2   19     2   19  14     18                  ')'     TRUE
25     2   21     2   23  19     30              SPECIAL     TRUE
26     2   26     2   33  21     30              COMMENT     TRUE
27     3    3     3   10  28     30                 expr    FALSE
28     3    3     3    8  23     25 SYMBOL_FUNCTION_CALL     TRUE
29     3    3     3    8  25     28                 expr    FALSE
30     3    9     3    9  24     28                  '('     TRUE
31     3   10     3   10  26     28                  ')'     TRUE
32     3   12     3   12  29     45                  '+'     TRUE
33     3   27     3   42  31     45              COMMENT     TRUE
34     4    3     4   16  43     45                 expr    FALSE
35     4    3     4    5  33     35 SYMBOL_FUNCTION_CALL     TRUE
36     4    3     4    5  35     43                 expr    FALSE
37     4    6     4    6  34     43                  '('     TRUE
38     4    7     4    7  36     43           SYMBOL_SUB     TRUE
39     4    9     4    9  37     43               EQ_SUB     TRUE
40     4   11     4   15  38     40               SYMBOL     TRUE
41     4   11     4   15  40     43                 expr    FALSE
42     4   16     4   16  39     43                  ')'     TRUE
43     4   18     4   18  44     59                  '+'     TRUE
44     5    3     5   15  57     59                 expr    FALSE
45     5    3     5    5  47     49 SYMBOL_FUNCTION_CALL     TRUE
46     5    3     5    5  49     57                 expr    FALSE
47     5    6     5    6  48     57                  '('     TRUE
48     5    7     5    7  50     57           SYMBOL_SUB     TRUE
49     5    9     5    9  51     57               EQ_SUB     TRUE
50     5   11     5   14  52     54               SYMBOL     TRUE
51     5   11     5   14  54     57                 expr    FALSE
52     5   15     5   15  53     57                  ')'     TRUE
53     5   17     5   17  58     75                  '+'     TRUE
54     6    3     6   27  61     75              COMMENT     TRUE
55     7    3     7   24  73     75                 expr    FALSE
56     7    3     7   12  63     65 SYMBOL_FUNCTION_CALL     TRUE
57     7    3     7   12  65     73                 expr    FALSE
58     7   13     7   13  64     73                  '('     TRUE
59     7   14     7   18  66     73           SYMBOL_SUB     TRUE
60     7   20     7   20  67     73               EQ_SUB     TRUE
61     7   22     7   23  68     69            NUM_CONST     TRUE
62     7   22     7   23  69     73                 expr    FALSE
63     7   24     7   24  70     73                  ')'     TRUE
64     7   26     7   26  74     90                  '+'     TRUE
65     7   28     7   34  76     90              COMMENT     TRUE
66     8    3     8   23  88     90                 expr    FALSE
67     8    3     8   12  78     80 SYMBOL_FUNCTION_CALL     TRUE
68     8    3     8   12  80     88                 expr    FALSE
69     8   13     8   13  79     88                  '('     TRUE
70     8   14     8   18  81     88           SYMBOL_SUB     TRUE
71     8   20     8   20  82     88               EQ_SUB     TRUE
72     8   22     8   22  83     84            NUM_CONST     TRUE
73     8   22     8   22  84     88                 expr    FALSE
74     8   23     8   23  85     88                  ')'     TRUE
75     8   25     8   25  89    105                  '+'     TRUE
76     8   27     8   34  91    105              COMMENT     TRUE
77     9    3     9   25 103    105                 expr    FALSE
78     9    3     9   13  93     95 SYMBOL_FUNCTION_CALL     TRUE
79     9    3     9   13  95    103                 expr    FALSE
80     9   14     9   14  94    103                  '('     TRUE
81     9   15     9   19  96    103           SYMBOL_SUB     TRUE
82     9   21     9   21  97    103               EQ_SUB     TRUE
83     9   23     9   24  98     99            NUM_CONST     TRUE
84     9   23     9   24  99    103                 expr    FALSE
85     9   25     9   25 100    103                  ')'     TRUE
86     9   27     9   27 104    131                  '+'     TRUE
87     9   29     9   36 106    131              COMMENT     TRUE
88    10    3    13    6 130    131                 expr    FALSE
89    10    3    12    3 124    130                 expr    FALSE
90    10    3    10    5 108    110 SYMBOL_FUNCTION_CALL     TRUE
91    10    3    10    5 110    124                 expr    FALSE
92    10    6    10    6 109    124                  '('     TRUE
93    10    7    10   11 111    124           SYMBOL_SUB     TRUE
94    10   13    10   13 112    124               EQ_SUB     TRUE
95    11    3    11   12 121    124                 expr    FALSE
96    11    3    11    7 114    116               SYMBOL     TRUE
97    11    3    11    7 116    121                 expr    FALSE
98    11    9    11    9 115    121                   GT     TRUE
99    11   11    11   12 117    118            NUM_CONST     TRUE
100   11   11    11   12 118    121                 expr    FALSE
101   12    3    12    3 120    124                  ')'     TRUE
102   12    5    12    7 125    130              SPECIAL     TRUE
103   13    3    13    6 127    129               SYMBOL     TRUE
104   13    3    13    6 129    130                 expr    FALSE
105   13    8    13    9 128    137         RIGHT_ASSIGN     TRUE
106   14    3    14    9 133    136               SYMBOL     TRUE
107   14    3    14    9 136    137                 expr    FALSE
108   14   12    14   18 134   -137              COMMENT     TRUE
                         text open_par closed_par open_curly closed_curly
1                                FALSE      FALSE      FALSE        FALSE
2                                FALSE      FALSE      FALSE        FALSE
3                                FALSE      FALSE      FALSE        FALSE
4                                FALSE      FALSE      FALSE        FALSE
5                                FALSE      FALSE      FALSE        FALSE
6                                FALSE      FALSE      FALSE        FALSE
7                                FALSE      FALSE      FALSE        FALSE
8                                FALSE      FALSE      FALSE        FALSE
9                                FALSE      FALSE      FALSE        FALSE
10                       cars    FALSE      FALSE      FALSE        FALSE
11                               FALSE      FALSE      FALSE        FALSE
12                        %&gt;%    FALSE      FALSE      FALSE        FALSE
13        # the data  #REVEAL    FALSE      FALSE      FALSE        FALSE
14                               FALSE      FALSE      FALSE        FALSE
15                     filter    FALSE      FALSE      FALSE        FALSE
16                               FALSE      FALSE      FALSE        FALSE
17                          (     TRUE      FALSE      FALSE        FALSE
18                               FALSE      FALSE      FALSE        FALSE
19                      speed    FALSE      FALSE      FALSE        FALSE
20                               FALSE      FALSE      FALSE        FALSE
21                          &gt;    FALSE      FALSE      FALSE        FALSE
22                          4    FALSE      FALSE      FALSE        FALSE
23                               FALSE      FALSE      FALSE        FALSE
24                          )    FALSE       TRUE      FALSE        FALSE
25                        %&gt;%    FALSE      FALSE      FALSE        FALSE
26                   # subset    FALSE      FALSE      FALSE        FALSE
27                               FALSE      FALSE      FALSE        FALSE
28                     ggplot    FALSE      FALSE      FALSE        FALSE
29                               FALSE      FALSE      FALSE        FALSE
30                          (     TRUE      FALSE      FALSE        FALSE
31                          )    FALSE       TRUE      FALSE        FALSE
32                          +    FALSE      FALSE      FALSE        FALSE
33           # pipe to ggplot    FALSE      FALSE      FALSE        FALSE
34                               FALSE      FALSE      FALSE        FALSE
35                        aes    FALSE      FALSE      FALSE        FALSE
36                               FALSE      FALSE      FALSE        FALSE
37                          (     TRUE      FALSE      FALSE        FALSE
38                          x    FALSE      FALSE      FALSE        FALSE
39                          =    FALSE      FALSE      FALSE        FALSE
40                      speed    FALSE      FALSE      FALSE        FALSE
41                               FALSE      FALSE      FALSE        FALSE
42                          )    FALSE       TRUE      FALSE        FALSE
43                          +    FALSE      FALSE      FALSE        FALSE
44                               FALSE      FALSE      FALSE        FALSE
45                        aes    FALSE      FALSE      FALSE        FALSE
46                               FALSE      FALSE      FALSE        FALSE
47                          (     TRUE      FALSE      FALSE        FALSE
48                          y    FALSE      FALSE      FALSE        FALSE
49                          =    FALSE      FALSE      FALSE        FALSE
50                       dist    FALSE      FALSE      FALSE        FALSE
51                               FALSE      FALSE      FALSE        FALSE
52                          )    FALSE       TRUE      FALSE        FALSE
53                          +    FALSE      FALSE      FALSE        FALSE
54  # Describing what follows    FALSE      FALSE      FALSE        FALSE
55                               FALSE      FALSE      FALSE        FALSE
56                 geom_point    FALSE      FALSE      FALSE        FALSE
57                               FALSE      FALSE      FALSE        FALSE
58                          (     TRUE      FALSE      FALSE        FALSE
59                      alpha    FALSE      FALSE      FALSE        FALSE
60                          =    FALSE      FALSE      FALSE        FALSE
61                         .3    FALSE      FALSE      FALSE        FALSE
62                               FALSE      FALSE      FALSE        FALSE
63                          )    FALSE       TRUE      FALSE        FALSE
64                          +    FALSE      FALSE      FALSE        FALSE
65                    #REVEAL    FALSE      FALSE      FALSE        FALSE
66                               FALSE      FALSE      FALSE        FALSE
67                 geom_point    FALSE      FALSE      FALSE        FALSE
68                               FALSE      FALSE      FALSE        FALSE
69                          (     TRUE      FALSE      FALSE        FALSE
70                      alpha    FALSE      FALSE      FALSE        FALSE
71                          =    FALSE      FALSE      FALSE        FALSE
72                          1    FALSE      FALSE      FALSE        FALSE
73                               FALSE      FALSE      FALSE        FALSE
74                          )    FALSE       TRUE      FALSE        FALSE
75                          +    FALSE      FALSE      FALSE        FALSE
76                   #REVEAL2    FALSE      FALSE      FALSE        FALSE
77                               FALSE      FALSE      FALSE        FALSE
78                geom_jitter    FALSE      FALSE      FALSE        FALSE
79                               FALSE      FALSE      FALSE        FALSE
80                          (     TRUE      FALSE      FALSE        FALSE
81                      alpha    FALSE      FALSE      FALSE        FALSE
82                          =    FALSE      FALSE      FALSE        FALSE
83                         .5    FALSE      FALSE      FALSE        FALSE
84                               FALSE      FALSE      FALSE        FALSE
85                          )    FALSE       TRUE      FALSE        FALSE
86                          +    FALSE      FALSE      FALSE        FALSE
87                   #REVEAL3    FALSE      FALSE      FALSE        FALSE
88                               FALSE      FALSE      FALSE        FALSE
89                               FALSE      FALSE      FALSE        FALSE
90                        aes    FALSE      FALSE      FALSE        FALSE
91                               FALSE      FALSE      FALSE        FALSE
92                          (     TRUE      FALSE      FALSE        FALSE
93                      color    FALSE      FALSE      FALSE        FALSE
94                          =    FALSE      FALSE      FALSE        FALSE
95                               FALSE      FALSE      FALSE        FALSE
96                      speed    FALSE      FALSE      FALSE        FALSE
97                               FALSE      FALSE      FALSE        FALSE
98                          &gt;    FALSE      FALSE      FALSE        FALSE
99                         14    FALSE      FALSE      FALSE        FALSE
100                              FALSE      FALSE      FALSE        FALSE
101                         )    FALSE       TRUE      FALSE        FALSE
102                       %+%    FALSE      FALSE      FALSE        FALSE
103                      cars    FALSE      FALSE      FALSE        FALSE
104                              FALSE      FALSE      FALSE        FALSE
105                        -&gt;    FALSE      FALSE      FALSE        FALSE
106                   my_plot    FALSE      FALSE      FALSE        FALSE
107                              FALSE      FALSE      FALSE        FALSE
108                   #REVEAL    FALSE      FALSE      FALSE        FALSE
    open_square closed_square
1         FALSE         FALSE
2         FALSE         FALSE
3         FALSE         FALSE
4         FALSE         FALSE
5         FALSE         FALSE
6         FALSE         FALSE
7         FALSE         FALSE
8         FALSE         FALSE
9         FALSE         FALSE
10        FALSE         FALSE
11        FALSE         FALSE
12        FALSE         FALSE
13        FALSE         FALSE
14        FALSE         FALSE
15        FALSE         FALSE
16        FALSE         FALSE
17        FALSE         FALSE
18        FALSE         FALSE
19        FALSE         FALSE
20        FALSE         FALSE
21        FALSE         FALSE
22        FALSE         FALSE
23        FALSE         FALSE
24        FALSE         FALSE
25        FALSE         FALSE
26        FALSE         FALSE
27        FALSE         FALSE
28        FALSE         FALSE
29        FALSE         FALSE
30        FALSE         FALSE
31        FALSE         FALSE
32        FALSE         FALSE
33        FALSE         FALSE
34        FALSE         FALSE
35        FALSE         FALSE
36        FALSE         FALSE
37        FALSE         FALSE
38        FALSE         FALSE
39        FALSE         FALSE
40        FALSE         FALSE
41        FALSE         FALSE
42        FALSE         FALSE
43        FALSE         FALSE
44        FALSE         FALSE
45        FALSE         FALSE
46        FALSE         FALSE
47        FALSE         FALSE
48        FALSE         FALSE
49        FALSE         FALSE
50        FALSE         FALSE
51        FALSE         FALSE
52        FALSE         FALSE
53        FALSE         FALSE
54        FALSE         FALSE
55        FALSE         FALSE
56        FALSE         FALSE
57        FALSE         FALSE
58        FALSE         FALSE
59        FALSE         FALSE
60        FALSE         FALSE
61        FALSE         FALSE
62        FALSE         FALSE
63        FALSE         FALSE
64        FALSE         FALSE
65        FALSE         FALSE
66        FALSE         FALSE
67        FALSE         FALSE
68        FALSE         FALSE
69        FALSE         FALSE
70        FALSE         FALSE
71        FALSE         FALSE
72        FALSE         FALSE
73        FALSE         FALSE
74        FALSE         FALSE
75        FALSE         FALSE
76        FALSE         FALSE
77        FALSE         FALSE
78        FALSE         FALSE
79        FALSE         FALSE
80        FALSE         FALSE
81        FALSE         FALSE
82        FALSE         FALSE
83        FALSE         FALSE
84        FALSE         FALSE
85        FALSE         FALSE
86        FALSE         FALSE
87        FALSE         FALSE
88        FALSE         FALSE
89        FALSE         FALSE
90        FALSE         FALSE
91        FALSE         FALSE
92        FALSE         FALSE
93        FALSE         FALSE
94        FALSE         FALSE
95        FALSE         FALSE
96        FALSE         FALSE
97        FALSE         FALSE
98        FALSE         FALSE
99        FALSE         FALSE
100       FALSE         FALSE
101       FALSE         FALSE
102       FALSE         FALSE
103       FALSE         FALSE
104       FALSE         FALSE
105       FALSE         FALSE
106       FALSE         FALSE
107       FALSE         FALSE
108       FALSE         FALSE
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
    dplyr::mutate(open_curly = text == "{") %&gt;%  
    dplyr::mutate(closed_curly = text == "}") %&gt;%  
    dplyr::mutate(open_square = text == "[") %&gt;%  
    dplyr::mutate(open_square = ifelse(text == "[[", 2, open_square)) %&gt;%  
    dplyr::mutate(closed_square = text == "]") %&gt;%  
*   dplyr::group_by(line)
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
# A tibble: 108 x 15
# Groups:   line [14]
    line  col1 line2  col2    id parent token terminal text  open_par closed_par
   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;  &lt;int&gt; &lt;chr&gt; &lt;lgl&gt;    &lt;chr&gt; &lt;lgl&gt;    &lt;lgl&gt;     
 1     1     1    14     9   137      0 expr  FALSE    ""    FALSE    FALSE     
 2     1     1    13     6   131    137 expr  FALSE    ""    FALSE    FALSE     
 3     1     1     9    25   105    131 expr  FALSE    ""    FALSE    FALSE     
 4     1     1     8    23    90    105 expr  FALSE    ""    FALSE    FALSE     
 5     1     1     7    24    75     90 expr  FALSE    ""    FALSE    FALSE     
 6     1     1     5    15    59     75 expr  FALSE    ""    FALSE    FALSE     
 7     1     1     4    16    45     59 expr  FALSE    ""    FALSE    FALSE     
 8     1     1     3    10    30     45 expr  FALSE    ""    FALSE    FALSE     
 9     1     1     2    19    20     30 expr  FALSE    ""    FALSE    FALSE     
10     1     1     1     4     1      3 SYMB… TRUE     "car… FALSE    FALSE     
# … with 98 more rows, and 4 more variables: open_curly &lt;lgl&gt;,
#   closed_curly &lt;lgl&gt;, open_square &lt;lgl&gt;, closed_square &lt;lgl&gt;
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
    dplyr::mutate(open_curly = text == "{") %&gt;%  
    dplyr::mutate(closed_curly = text == "}") %&gt;%  
    dplyr::mutate(open_square = text == "[") %&gt;%  
    dplyr::mutate(open_square = ifelse(text == "[[", 2, open_square)) %&gt;%  
    dplyr::mutate(closed_square = text == "]") %&gt;%  
    dplyr::group_by(line) %&gt;%  
*   dplyr::summarise(
*     full_line = paste0(text, collapse = ""),
*     comment = stringr::str_trim(paste0(ifelse(token == "COMMENT", text, ""),
*                                        collapse = " ")),
*     num_open_par = sum(open_par),
*     num_closed_par = sum(closed_par),
*     num_open_curly = sum(open_curly),
*     num_closed_curly = sum(closed_curly),
*     num_open_square = sum(open_square),
*     num_closed_square = sum(closed_square)
*             )
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
# A tibble: 14 x 9
    line full_line comment num_open_par num_closed_par num_open_curly
   &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;          &lt;int&gt;          &lt;int&gt;          &lt;int&gt;
 1     1 cars%&gt;%#… "# the…            0              0              0
 2     2 filter(s… "# sub…            1              1              0
 3     3 ggplot()… "# pip…            1              1              0
 4     4 aes(x=sp… ""                 1              1              0
 5     5 aes(y=di… ""                 1              1              0
 6     6 # Descri… "# Des…            0              0              0
 7     7 geom_poi… "#REVE…            1              1              0
 8     8 geom_poi… "#REVE…            1              1              0
 9     9 geom_jit… "#REVE…            1              1              0
10    10 aes(colo… ""                 1              0              0
11    11 speed&gt;14  ""                 0              0              0
12    12 )%+%      ""                 0              1              0
13    13 cars-&gt;    ""                 0              0              0
14    14 my_plot#… "#REVE…            0              0              0
# … with 3 more variables: num_closed_curly &lt;int&gt;, num_open_square &lt;int&gt;,
#   num_closed_square &lt;int&gt;
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
    dplyr::mutate(open_curly = text == "{") %&gt;%  
    dplyr::mutate(closed_curly = text == "}") %&gt;%  
    dplyr::mutate(open_square = text == "[") %&gt;%  
    dplyr::mutate(open_square = ifelse(text == "[[", 2, open_square)) %&gt;%  
    dplyr::mutate(closed_square = text == "]") %&gt;%  
    dplyr::group_by(line) %&gt;%  
    dplyr::summarise(  
      full_line = paste0(text, collapse = ""),  
      comment = stringr::str_trim(paste0(ifelse(token == "COMMENT", text, ""),  
                                         collapse = " ")),  
      num_open_par = sum(open_par),  
      num_closed_par = sum(closed_par),  
      num_open_curly = sum(open_curly),  
      num_closed_curly = sum(closed_curly),  
      num_open_square = sum(open_square),  
      num_closed_square = sum(closed_square)  
              ) %&gt;%  
*   dplyr::left_join(raw_code_table)
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
# A tibble: 14 x 10
    line full_line comment num_open_par num_closed_par num_open_curly
   &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;          &lt;int&gt;          &lt;int&gt;          &lt;int&gt;
 1     1 cars%&gt;%#… "# the…            0              0              0
 2     2 filter(s… "# sub…            1              1              0
 3     3 ggplot()… "# pip…            1              1              0
 4     4 aes(x=sp… ""                 1              1              0
 5     5 aes(y=di… ""                 1              1              0
 6     6 # Descri… "# Des…            0              0              0
 7     7 geom_poi… "#REVE…            1              1              0
 8     8 geom_poi… "#REVE…            1              1              0
 9     9 geom_jit… "#REVE…            1              1              0
10    10 aes(colo… ""                 1              0              0
11    11 speed&gt;14  ""                 0              0              0
12    12 )%+%      ""                 0              1              0
13    13 cars-&gt;    ""                 0              0              0
14    14 my_plot#… "#REVE…            0              0              0
# … with 4 more variables: num_closed_curly &lt;int&gt;, num_open_square &lt;int&gt;,
#   num_closed_square &lt;int&gt;, raw_code &lt;chr&gt;
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
    dplyr::mutate(open_curly = text == "{") %&gt;%  
    dplyr::mutate(closed_curly = text == "}") %&gt;%  
    dplyr::mutate(open_square = text == "[") %&gt;%  
    dplyr::mutate(open_square = ifelse(text == "[[", 2, open_square)) %&gt;%  
    dplyr::mutate(closed_square = text == "]") %&gt;%  
    dplyr::group_by(line) %&gt;%  
    dplyr::summarise(  
      full_line = paste0(text, collapse = ""),  
      comment = stringr::str_trim(paste0(ifelse(token == "COMMENT", text, ""),  
                                         collapse = " ")),  
      num_open_par = sum(open_par),  
      num_closed_par = sum(closed_par),  
      num_open_curly = sum(open_curly),  
      num_closed_curly = sum(closed_curly),  
      num_open_square = sum(open_square),  
      num_closed_square = sum(closed_square)  
              ) %&gt;%  
    dplyr::left_join(raw_code_table) %&gt;%  
*   dplyr::mutate(code = ifelse(comment != "", stringr::str_remove(raw_code, comment), raw_code))
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
# A tibble: 14 x 11
    line full_line comment num_open_par num_closed_par num_open_curly
   &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;          &lt;int&gt;          &lt;int&gt;          &lt;int&gt;
 1     1 cars%&gt;%#… "# the…            0              0              0
 2     2 filter(s… "# sub…            1              1              0
 3     3 ggplot()… "# pip…            1              1              0
 4     4 aes(x=sp… ""                 1              1              0
 5     5 aes(y=di… ""                 1              1              0
 6     6 # Descri… "# Des…            0              0              0
 7     7 geom_poi… "#REVE…            1              1              0
 8     8 geom_poi… "#REVE…            1              1              0
 9     9 geom_jit… "#REVE…            1              1              0
10    10 aes(colo… ""                 1              0              0
11    11 speed&gt;14  ""                 0              0              0
12    12 )%+%      ""                 0              1              0
13    13 cars-&gt;    ""                 0              0              0
14    14 my_plot#… "#REVE…            0              0              0
# … with 5 more variables: num_closed_curly &lt;int&gt;, num_open_square &lt;int&gt;,
#   num_closed_square &lt;int&gt;, raw_code &lt;chr&gt;, code &lt;chr&gt;
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
    dplyr::mutate(open_curly = text == "{") %&gt;%  
    dplyr::mutate(closed_curly = text == "}") %&gt;%  
    dplyr::mutate(open_square = text == "[") %&gt;%  
    dplyr::mutate(open_square = ifelse(text == "[[", 2, open_square)) %&gt;%  
    dplyr::mutate(closed_square = text == "]") %&gt;%  
    dplyr::group_by(line) %&gt;%  
    dplyr::summarise(  
      full_line = paste0(text, collapse = ""),  
      comment = stringr::str_trim(paste0(ifelse(token == "COMMENT", text, ""),  
                                         collapse = " ")),  
      num_open_par = sum(open_par),  
      num_closed_par = sum(closed_par),  
      num_open_curly = sum(open_curly),  
      num_closed_curly = sum(closed_curly),  
      num_open_square = sum(open_square),  
      num_closed_square = sum(closed_square)  
              ) %&gt;%  
    dplyr::left_join(raw_code_table) %&gt;%  
    dplyr::mutate(code = ifelse(comment != "", stringr::str_remove(raw_code, comment), raw_code)) %&gt;%  
*   dplyr::mutate(connector = stringr::str_extract(stringr::str_trim(code), "%&gt;%$|\\+$|-&gt;$|%\\+%"))
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
# A tibble: 14 x 12
    line full_line comment num_open_par num_closed_par num_open_curly
   &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;          &lt;int&gt;          &lt;int&gt;          &lt;int&gt;
 1     1 cars%&gt;%#… "# the…            0              0              0
 2     2 filter(s… "# sub…            1              1              0
 3     3 ggplot()… "# pip…            1              1              0
 4     4 aes(x=sp… ""                 1              1              0
 5     5 aes(y=di… ""                 1              1              0
 6     6 # Descri… "# Des…            0              0              0
 7     7 geom_poi… "#REVE…            1              1              0
 8     8 geom_poi… "#REVE…            1              1              0
 9     9 geom_jit… "#REVE…            1              1              0
10    10 aes(colo… ""                 1              0              0
11    11 speed&gt;14  ""                 0              0              0
12    12 )%+%      ""                 0              1              0
13    13 cars-&gt;    ""                 0              0              0
14    14 my_plot#… "#REVE…            0              0              0
# … with 6 more variables: num_closed_curly &lt;int&gt;, num_open_square &lt;int&gt;,
#   num_closed_square &lt;int&gt;, raw_code &lt;chr&gt;, code &lt;chr&gt;, connector &lt;chr&gt;
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
    dplyr::mutate(open_curly = text == "{") %&gt;%  
    dplyr::mutate(closed_curly = text == "}") %&gt;%  
    dplyr::mutate(open_square = text == "[") %&gt;%  
    dplyr::mutate(open_square = ifelse(text == "[[", 2, open_square)) %&gt;%  
    dplyr::mutate(closed_square = text == "]") %&gt;%  
    dplyr::group_by(line) %&gt;%  
    dplyr::summarise(  
      full_line = paste0(text, collapse = ""),  
      comment = stringr::str_trim(paste0(ifelse(token == "COMMENT", text, ""),  
                                         collapse = " ")),  
      num_open_par = sum(open_par),  
      num_closed_par = sum(closed_par),  
      num_open_curly = sum(open_curly),  
      num_closed_curly = sum(closed_curly),  
      num_open_square = sum(open_square),  
      num_closed_square = sum(closed_square)  
              ) %&gt;%  
    dplyr::left_join(raw_code_table) %&gt;%  
    dplyr::mutate(code = ifelse(comment != "", stringr::str_remove(raw_code, comment), raw_code)) %&gt;%  
    dplyr::mutate(connector = stringr::str_extract(stringr::str_trim(code), "%&gt;%$|\\+$|-&gt;$|%\\+%")) %&gt;%  
*   dplyr::mutate(connector = tidyr::replace_na(connector, ""))
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
# A tibble: 14 x 12
    line full_line comment num_open_par num_closed_par num_open_curly
   &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;          &lt;int&gt;          &lt;int&gt;          &lt;int&gt;
 1     1 cars%&gt;%#… "# the…            0              0              0
 2     2 filter(s… "# sub…            1              1              0
 3     3 ggplot()… "# pip…            1              1              0
 4     4 aes(x=sp… ""                 1              1              0
 5     5 aes(y=di… ""                 1              1              0
 6     6 # Descri… "# Des…            0              0              0
 7     7 geom_poi… "#REVE…            1              1              0
 8     8 geom_poi… "#REVE…            1              1              0
 9     9 geom_jit… "#REVE…            1              1              0
10    10 aes(colo… ""                 1              0              0
11    11 speed&gt;14  ""                 0              0              0
12    12 )%+%      ""                 0              1              0
13    13 cars-&gt;    ""                 0              0              0
14    14 my_plot#… "#REVE…            0              0              0
# … with 6 more variables: num_closed_curly &lt;int&gt;, num_open_square &lt;int&gt;,
#   num_closed_square &lt;int&gt;, raw_code &lt;chr&gt;, code &lt;chr&gt;, connector &lt;chr&gt;
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
    dplyr::mutate(open_curly = text == "{") %&gt;%  
    dplyr::mutate(closed_curly = text == "}") %&gt;%  
    dplyr::mutate(open_square = text == "[") %&gt;%  
    dplyr::mutate(open_square = ifelse(text == "[[", 2, open_square)) %&gt;%  
    dplyr::mutate(closed_square = text == "]") %&gt;%  
    dplyr::group_by(line) %&gt;%  
    dplyr::summarise(  
      full_line = paste0(text, collapse = ""),  
      comment = stringr::str_trim(paste0(ifelse(token == "COMMENT", text, ""),  
                                         collapse = " ")),  
      num_open_par = sum(open_par),  
      num_closed_par = sum(closed_par),  
      num_open_curly = sum(open_curly),  
      num_closed_curly = sum(closed_curly),  
      num_open_square = sum(open_square),  
      num_closed_square = sum(closed_square)  
              ) %&gt;%  
    dplyr::left_join(raw_code_table) %&gt;%  
    dplyr::mutate(code = ifelse(comment != "", stringr::str_remove(raw_code, comment), raw_code)) %&gt;%  
    dplyr::mutate(connector = stringr::str_extract(stringr::str_trim(code), "%&gt;%$|\\+$|-&gt;$|%\\+%")) %&gt;%  
    dplyr::mutate(connector = tidyr::replace_na(connector, "")) %&gt;%  
*   dplyr::mutate(non_seq = stringr::str_extract(comment, "#REVEAL-?\\d+"))
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
# A tibble: 14 x 13
    line full_line comment num_open_par num_closed_par num_open_curly
   &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;          &lt;int&gt;          &lt;int&gt;          &lt;int&gt;
 1     1 cars%&gt;%#… "# the…            0              0              0
 2     2 filter(s… "# sub…            1              1              0
 3     3 ggplot()… "# pip…            1              1              0
 4     4 aes(x=sp… ""                 1              1              0
 5     5 aes(y=di… ""                 1              1              0
 6     6 # Descri… "# Des…            0              0              0
 7     7 geom_poi… "#REVE…            1              1              0
 8     8 geom_poi… "#REVE…            1              1              0
 9     9 geom_jit… "#REVE…            1              1              0
10    10 aes(colo… ""                 1              0              0
11    11 speed&gt;14  ""                 0              0              0
12    12 )%+%      ""                 0              1              0
13    13 cars-&gt;    ""                 0              0              0
14    14 my_plot#… "#REVE…            0              0              0
# … with 7 more variables: num_closed_curly &lt;int&gt;, num_open_square &lt;int&gt;,
#   num_closed_square &lt;int&gt;, raw_code &lt;chr&gt;, code &lt;chr&gt;, connector &lt;chr&gt;,
#   non_seq &lt;chr&gt;
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
    dplyr::mutate(open_curly = text == "{") %&gt;%  
    dplyr::mutate(closed_curly = text == "}") %&gt;%  
    dplyr::mutate(open_square = text == "[") %&gt;%  
    dplyr::mutate(open_square = ifelse(text == "[[", 2, open_square)) %&gt;%  
    dplyr::mutate(closed_square = text == "]") %&gt;%  
    dplyr::group_by(line) %&gt;%  
    dplyr::summarise(  
      full_line = paste0(text, collapse = ""),  
      comment = stringr::str_trim(paste0(ifelse(token == "COMMENT", text, ""),  
                                         collapse = " ")),  
      num_open_par = sum(open_par),  
      num_closed_par = sum(closed_par),  
      num_open_curly = sum(open_curly),  
      num_closed_curly = sum(closed_curly),  
      num_open_square = sum(open_square),  
      num_closed_square = sum(closed_square)  
              ) %&gt;%  
    dplyr::left_join(raw_code_table) %&gt;%  
    dplyr::mutate(code = ifelse(comment != "", stringr::str_remove(raw_code, comment), raw_code)) %&gt;%  
    dplyr::mutate(connector = stringr::str_extract(stringr::str_trim(code), "%&gt;%$|\\+$|-&gt;$|%\\+%")) %&gt;%  
    dplyr::mutate(connector = tidyr::replace_na(connector, "")) %&gt;%  
    dplyr::mutate(non_seq = stringr::str_extract(comment, "#REVEAL-?\\d+")) %&gt;%  
*   dplyr::mutate(non_seq = stringr::str_extract(non_seq, "-?\\d+"))
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
# A tibble: 14 x 13
    line full_line comment num_open_par num_closed_par num_open_curly
   &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;          &lt;int&gt;          &lt;int&gt;          &lt;int&gt;
 1     1 cars%&gt;%#… "# the…            0              0              0
 2     2 filter(s… "# sub…            1              1              0
 3     3 ggplot()… "# pip…            1              1              0
 4     4 aes(x=sp… ""                 1              1              0
 5     5 aes(y=di… ""                 1              1              0
 6     6 # Descri… "# Des…            0              0              0
 7     7 geom_poi… "#REVE…            1              1              0
 8     8 geom_poi… "#REVE…            1              1              0
 9     9 geom_jit… "#REVE…            1              1              0
10    10 aes(colo… ""                 1              0              0
11    11 speed&gt;14  ""                 0              0              0
12    12 )%+%      ""                 0              1              0
13    13 cars-&gt;    ""                 0              0              0
14    14 my_plot#… "#REVE…            0              0              0
# … with 7 more variables: num_closed_curly &lt;int&gt;, num_open_square &lt;int&gt;,
#   num_closed_square &lt;int&gt;, raw_code &lt;chr&gt;, code &lt;chr&gt;, connector &lt;chr&gt;,
#   non_seq &lt;chr&gt;
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
    dplyr::mutate(open_curly = text == "{") %&gt;%  
    dplyr::mutate(closed_curly = text == "}") %&gt;%  
    dplyr::mutate(open_square = text == "[") %&gt;%  
    dplyr::mutate(open_square = ifelse(text == "[[", 2, open_square)) %&gt;%  
    dplyr::mutate(closed_square = text == "]") %&gt;%  
    dplyr::group_by(line) %&gt;%  
    dplyr::summarise(  
      full_line = paste0(text, collapse = ""),  
      comment = stringr::str_trim(paste0(ifelse(token == "COMMENT", text, ""),  
                                         collapse = " ")),  
      num_open_par = sum(open_par),  
      num_closed_par = sum(closed_par),  
      num_open_curly = sum(open_curly),  
      num_closed_curly = sum(closed_curly),  
      num_open_square = sum(open_square),  
      num_closed_square = sum(closed_square)  
              ) %&gt;%  
    dplyr::left_join(raw_code_table) %&gt;%  
    dplyr::mutate(code = ifelse(comment != "", stringr::str_remove(raw_code, comment), raw_code)) %&gt;%  
    dplyr::mutate(connector = stringr::str_extract(stringr::str_trim(code), "%&gt;%$|\\+$|-&gt;$|%\\+%")) %&gt;%  
    dplyr::mutate(connector = tidyr::replace_na(connector, "")) %&gt;%  
    dplyr::mutate(non_seq = stringr::str_extract(comment, "#REVEAL-?\\d+")) %&gt;%  
    dplyr::mutate(non_seq = stringr::str_extract(non_seq, "-?\\d+")) %&gt;%  
*   dplyr::mutate(non_seq = as.numeric(non_seq))
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
# A tibble: 14 x 13
    line full_line comment num_open_par num_closed_par num_open_curly
   &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;          &lt;int&gt;          &lt;int&gt;          &lt;int&gt;
 1     1 cars%&gt;%#… "# the…            0              0              0
 2     2 filter(s… "# sub…            1              1              0
 3     3 ggplot()… "# pip…            1              1              0
 4     4 aes(x=sp… ""                 1              1              0
 5     5 aes(y=di… ""                 1              1              0
 6     6 # Descri… "# Des…            0              0              0
 7     7 geom_poi… "#REVE…            1              1              0
 8     8 geom_poi… "#REVE…            1              1              0
 9     9 geom_jit… "#REVE…            1              1              0
10    10 aes(colo… ""                 1              0              0
11    11 speed&gt;14  ""                 0              0              0
12    12 )%+%      ""                 0              1              0
13    13 cars-&gt;    ""                 0              0              0
14    14 my_plot#… "#REVE…            0              0              0
# … with 7 more variables: num_closed_curly &lt;int&gt;, num_open_square &lt;int&gt;,
#   num_closed_square &lt;int&gt;, raw_code &lt;chr&gt;, code &lt;chr&gt;, connector &lt;chr&gt;,
#   non_seq &lt;dbl&gt;
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
    dplyr::mutate(open_curly = text == "{") %&gt;%  
    dplyr::mutate(closed_curly = text == "}") %&gt;%  
    dplyr::mutate(open_square = text == "[") %&gt;%  
    dplyr::mutate(open_square = ifelse(text == "[[", 2, open_square)) %&gt;%  
    dplyr::mutate(closed_square = text == "]") %&gt;%  
    dplyr::group_by(line) %&gt;%  
    dplyr::summarise(  
      full_line = paste0(text, collapse = ""),  
      comment = stringr::str_trim(paste0(ifelse(token == "COMMENT", text, ""),  
                                         collapse = " ")),  
      num_open_par = sum(open_par),  
      num_closed_par = sum(closed_par),  
      num_open_curly = sum(open_curly),  
      num_closed_curly = sum(closed_curly),  
      num_open_square = sum(open_square),  
      num_closed_square = sum(closed_square)  
              ) %&gt;%  
    dplyr::left_join(raw_code_table) %&gt;%  
    dplyr::mutate(code = ifelse(comment != "", stringr::str_remove(raw_code, comment), raw_code)) %&gt;%  
    dplyr::mutate(connector = stringr::str_extract(stringr::str_trim(code), "%&gt;%$|\\+$|-&gt;$|%\\+%")) %&gt;%  
    dplyr::mutate(connector = tidyr::replace_na(connector, "")) %&gt;%  
    dplyr::mutate(non_seq = stringr::str_extract(comment, "#REVEAL-?\\d+")) %&gt;%  
    dplyr::mutate(non_seq = stringr::str_extract(non_seq, "-?\\d+")) %&gt;%  
    dplyr::mutate(non_seq = as.numeric(non_seq)) %&gt;%  
*   dplyr::mutate(non_seq = tidyr::replace_na(non_seq, 1))
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
# A tibble: 14 x 13
    line full_line comment num_open_par num_closed_par num_open_curly
   &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;          &lt;int&gt;          &lt;int&gt;          &lt;int&gt;
 1     1 cars%&gt;%#… "# the…            0              0              0
 2     2 filter(s… "# sub…            1              1              0
 3     3 ggplot()… "# pip…            1              1              0
 4     4 aes(x=sp… ""                 1              1              0
 5     5 aes(y=di… ""                 1              1              0
 6     6 # Descri… "# Des…            0              0              0
 7     7 geom_poi… "#REVE…            1              1              0
 8     8 geom_poi… "#REVE…            1              1              0
 9     9 geom_jit… "#REVE…            1              1              0
10    10 aes(colo… ""                 1              0              0
11    11 speed&gt;14  ""                 0              0              0
12    12 )%+%      ""                 0              1              0
13    13 cars-&gt;    ""                 0              0              0
14    14 my_plot#… "#REVE…            0              0              0
# … with 7 more variables: num_closed_curly &lt;int&gt;, num_open_square &lt;int&gt;,
#   num_closed_square &lt;int&gt;, raw_code &lt;chr&gt;, code &lt;chr&gt;, connector &lt;chr&gt;,
#   non_seq &lt;dbl&gt;
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
    dplyr::mutate(open_curly = text == "{") %&gt;%  
    dplyr::mutate(closed_curly = text == "}") %&gt;%  
    dplyr::mutate(open_square = text == "[") %&gt;%  
    dplyr::mutate(open_square = ifelse(text == "[[", 2, open_square)) %&gt;%  
    dplyr::mutate(closed_square = text == "]") %&gt;%  
    dplyr::group_by(line) %&gt;%  
    dplyr::summarise(  
      full_line = paste0(text, collapse = ""),  
      comment = stringr::str_trim(paste0(ifelse(token == "COMMENT", text, ""),  
                                         collapse = " ")),  
      num_open_par = sum(open_par),  
      num_closed_par = sum(closed_par),  
      num_open_curly = sum(open_curly),  
      num_closed_curly = sum(closed_curly),  
      num_open_square = sum(open_square),  
      num_closed_square = sum(closed_square)  
              ) %&gt;%  
    dplyr::left_join(raw_code_table) %&gt;%  
    dplyr::mutate(code = ifelse(comment != "", stringr::str_remove(raw_code, comment), raw_code)) %&gt;%  
    dplyr::mutate(connector = stringr::str_extract(stringr::str_trim(code), "%&gt;%$|\\+$|-&gt;$|%\\+%")) %&gt;%  
    dplyr::mutate(connector = tidyr::replace_na(connector, "")) %&gt;%  
    dplyr::mutate(non_seq = stringr::str_extract(comment, "#REVEAL-?\\d+")) %&gt;%  
    dplyr::mutate(non_seq = stringr::str_extract(non_seq, "-?\\d+")) %&gt;%  
    dplyr::mutate(non_seq = as.numeric(non_seq)) %&gt;%  
    dplyr::mutate(non_seq = tidyr::replace_na(non_seq, 1)) %&gt;%  
*   dplyr::mutate(comment = stringr::str_remove(comment, "#REVEAL\\d+"))
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
# A tibble: 14 x 13
    line full_line comment num_open_par num_closed_par num_open_curly
   &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;          &lt;int&gt;          &lt;int&gt;          &lt;int&gt;
 1     1 cars%&gt;%#… "# the…            0              0              0
 2     2 filter(s… "# sub…            1              1              0
 3     3 ggplot()… "# pip…            1              1              0
 4     4 aes(x=sp… ""                 1              1              0
 5     5 aes(y=di… ""                 1              1              0
 6     6 # Descri… "# Des…            0              0              0
 7     7 geom_poi… "#REVE…            1              1              0
 8     8 geom_poi… ""                 1              1              0
 9     9 geom_jit… ""                 1              1              0
10    10 aes(colo… ""                 1              0              0
11    11 speed&gt;14  ""                 0              0              0
12    12 )%+%      ""                 0              1              0
13    13 cars-&gt;    ""                 0              0              0
14    14 my_plot#… "#REVE…            0              0              0
# … with 7 more variables: num_closed_curly &lt;int&gt;, num_open_square &lt;int&gt;,
#   num_closed_square &lt;int&gt;, raw_code &lt;chr&gt;, code &lt;chr&gt;, connector &lt;chr&gt;,
#   non_seq &lt;dbl&gt;
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
    dplyr::mutate(open_curly = text == "{") %&gt;%  
    dplyr::mutate(closed_curly = text == "}") %&gt;%  
    dplyr::mutate(open_square = text == "[") %&gt;%  
    dplyr::mutate(open_square = ifelse(text == "[[", 2, open_square)) %&gt;%  
    dplyr::mutate(closed_square = text == "]") %&gt;%  
    dplyr::group_by(line) %&gt;%  
    dplyr::summarise(  
      full_line = paste0(text, collapse = ""),  
      comment = stringr::str_trim(paste0(ifelse(token == "COMMENT", text, ""),  
                                         collapse = " ")),  
      num_open_par = sum(open_par),  
      num_closed_par = sum(closed_par),  
      num_open_curly = sum(open_curly),  
      num_closed_curly = sum(closed_curly),  
      num_open_square = sum(open_square),  
      num_closed_square = sum(closed_square)  
              ) %&gt;%  
    dplyr::left_join(raw_code_table) %&gt;%  
    dplyr::mutate(code = ifelse(comment != "", stringr::str_remove(raw_code, comment), raw_code)) %&gt;%  
    dplyr::mutate(connector = stringr::str_extract(stringr::str_trim(code), "%&gt;%$|\\+$|-&gt;$|%\\+%")) %&gt;%  
    dplyr::mutate(connector = tidyr::replace_na(connector, "")) %&gt;%  
    dplyr::mutate(non_seq = stringr::str_extract(comment, "#REVEAL-?\\d+")) %&gt;%  
    dplyr::mutate(non_seq = stringr::str_extract(non_seq, "-?\\d+")) %&gt;%  
    dplyr::mutate(non_seq = as.numeric(non_seq)) %&gt;%  
    dplyr::mutate(non_seq = tidyr::replace_na(non_seq, 1)) %&gt;%  
    dplyr::mutate(comment = stringr::str_remove(comment, "#REVEAL\\d+")) %&gt;%  
*   dplyr::mutate(user = stringr::str_detect(comment, "#REVEAL"))
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
# A tibble: 14 x 14
    line full_line comment num_open_par num_closed_par num_open_curly
   &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;          &lt;int&gt;          &lt;int&gt;          &lt;int&gt;
 1     1 cars%&gt;%#… "# the…            0              0              0
 2     2 filter(s… "# sub…            1              1              0
 3     3 ggplot()… "# pip…            1              1              0
 4     4 aes(x=sp… ""                 1              1              0
 5     5 aes(y=di… ""                 1              1              0
 6     6 # Descri… "# Des…            0              0              0
 7     7 geom_poi… "#REVE…            1              1              0
 8     8 geom_poi… ""                 1              1              0
 9     9 geom_jit… ""                 1              1              0
10    10 aes(colo… ""                 1              0              0
11    11 speed&gt;14  ""                 0              0              0
12    12 )%+%      ""                 0              1              0
13    13 cars-&gt;    ""                 0              0              0
14    14 my_plot#… "#REVE…            0              0              0
# … with 8 more variables: num_closed_curly &lt;int&gt;, num_open_square &lt;int&gt;,
#   num_closed_square &lt;int&gt;, raw_code &lt;chr&gt;, code &lt;chr&gt;, connector &lt;chr&gt;,
#   non_seq &lt;dbl&gt;, user &lt;lgl&gt;
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
    dplyr::mutate(open_curly = text == "{") %&gt;%  
    dplyr::mutate(closed_curly = text == "}") %&gt;%  
    dplyr::mutate(open_square = text == "[") %&gt;%  
    dplyr::mutate(open_square = ifelse(text == "[[", 2, open_square)) %&gt;%  
    dplyr::mutate(closed_square = text == "]") %&gt;%  
    dplyr::group_by(line) %&gt;%  
    dplyr::summarise(  
      full_line = paste0(text, collapse = ""),  
      comment = stringr::str_trim(paste0(ifelse(token == "COMMENT", text, ""),  
                                         collapse = " ")),  
      num_open_par = sum(open_par),  
      num_closed_par = sum(closed_par),  
      num_open_curly = sum(open_curly),  
      num_closed_curly = sum(closed_curly),  
      num_open_square = sum(open_square),  
      num_closed_square = sum(closed_square)  
              ) %&gt;%  
    dplyr::left_join(raw_code_table) %&gt;%  
    dplyr::mutate(code = ifelse(comment != "", stringr::str_remove(raw_code, comment), raw_code)) %&gt;%  
    dplyr::mutate(connector = stringr::str_extract(stringr::str_trim(code), "%&gt;%$|\\+$|-&gt;$|%\\+%")) %&gt;%  
    dplyr::mutate(connector = tidyr::replace_na(connector, "")) %&gt;%  
    dplyr::mutate(non_seq = stringr::str_extract(comment, "#REVEAL-?\\d+")) %&gt;%  
    dplyr::mutate(non_seq = stringr::str_extract(non_seq, "-?\\d+")) %&gt;%  
    dplyr::mutate(non_seq = as.numeric(non_seq)) %&gt;%  
    dplyr::mutate(non_seq = tidyr::replace_na(non_seq, 1)) %&gt;%  
    dplyr::mutate(comment = stringr::str_remove(comment, "#REVEAL\\d+")) %&gt;%  
    dplyr::mutate(user = stringr::str_detect(comment, "#REVEAL")) %&gt;%  
*   dplyr::mutate(comment = stringr::str_remove(comment, "#REVEAL"))
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
# A tibble: 14 x 14
    line full_line comment num_open_par num_closed_par num_open_curly
   &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;          &lt;int&gt;          &lt;int&gt;          &lt;int&gt;
 1     1 cars%&gt;%#… "# the…            0              0              0
 2     2 filter(s… "# sub…            1              1              0
 3     3 ggplot()… "# pip…            1              1              0
 4     4 aes(x=sp… ""                 1              1              0
 5     5 aes(y=di… ""                 1              1              0
 6     6 # Descri… "# Des…            0              0              0
 7     7 geom_poi… ""                 1              1              0
 8     8 geom_poi… ""                 1              1              0
 9     9 geom_jit… ""                 1              1              0
10    10 aes(colo… ""                 1              0              0
11    11 speed&gt;14  ""                 0              0              0
12    12 )%+%      ""                 0              1              0
13    13 cars-&gt;    ""                 0              0              0
14    14 my_plot#… ""                 0              0              0
# … with 8 more variables: num_closed_curly &lt;int&gt;, num_open_square &lt;int&gt;,
#   num_closed_square &lt;int&gt;, raw_code &lt;chr&gt;, code &lt;chr&gt;, connector &lt;chr&gt;,
#   non_seq &lt;dbl&gt;, user &lt;lgl&gt;
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
    dplyr::mutate(open_curly = text == "{") %&gt;%  
    dplyr::mutate(closed_curly = text == "}") %&gt;%  
    dplyr::mutate(open_square = text == "[") %&gt;%  
    dplyr::mutate(open_square = ifelse(text == "[[", 2, open_square)) %&gt;%  
    dplyr::mutate(closed_square = text == "]") %&gt;%  
    dplyr::group_by(line) %&gt;%  
    dplyr::summarise(  
      full_line = paste0(text, collapse = ""),  
      comment = stringr::str_trim(paste0(ifelse(token == "COMMENT", text, ""),  
                                         collapse = " ")),  
      num_open_par = sum(open_par),  
      num_closed_par = sum(closed_par),  
      num_open_curly = sum(open_curly),  
      num_closed_curly = sum(closed_curly),  
      num_open_square = sum(open_square),  
      num_closed_square = sum(closed_square)  
              ) %&gt;%  
    dplyr::left_join(raw_code_table) %&gt;%  
    dplyr::mutate(code = ifelse(comment != "", stringr::str_remove(raw_code, comment), raw_code)) %&gt;%  
    dplyr::mutate(connector = stringr::str_extract(stringr::str_trim(code), "%&gt;%$|\\+$|-&gt;$|%\\+%")) %&gt;%  
    dplyr::mutate(connector = tidyr::replace_na(connector, "")) %&gt;%  
    dplyr::mutate(non_seq = stringr::str_extract(comment, "#REVEAL-?\\d+")) %&gt;%  
    dplyr::mutate(non_seq = stringr::str_extract(non_seq, "-?\\d+")) %&gt;%  
    dplyr::mutate(non_seq = as.numeric(non_seq)) %&gt;%  
    dplyr::mutate(non_seq = tidyr::replace_na(non_seq, 1)) %&gt;%  
    dplyr::mutate(comment = stringr::str_remove(comment, "#REVEAL\\d+")) %&gt;%  
    dplyr::mutate(user = stringr::str_detect(comment, "#REVEAL")) %&gt;%  
    dplyr::mutate(comment = stringr::str_remove(comment, "#REVEAL")) %&gt;%  
*   dplyr::mutate(code = stringr::str_remove(stringi::stri_trim_right(code), "%&gt;%$|\\+$|-&gt;$|%\\+%"))
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
# A tibble: 14 x 14
    line full_line comment num_open_par num_closed_par num_open_curly
   &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;          &lt;int&gt;          &lt;int&gt;          &lt;int&gt;
 1     1 cars%&gt;%#… "# the…            0              0              0
 2     2 filter(s… "# sub…            1              1              0
 3     3 ggplot()… "# pip…            1              1              0
 4     4 aes(x=sp… ""                 1              1              0
 5     5 aes(y=di… ""                 1              1              0
 6     6 # Descri… "# Des…            0              0              0
 7     7 geom_poi… ""                 1              1              0
 8     8 geom_poi… ""                 1              1              0
 9     9 geom_jit… ""                 1              1              0
10    10 aes(colo… ""                 1              0              0
11    11 speed&gt;14  ""                 0              0              0
12    12 )%+%      ""                 0              1              0
13    13 cars-&gt;    ""                 0              0              0
14    14 my_plot#… ""                 0              0              0
# … with 8 more variables: num_closed_curly &lt;int&gt;, num_open_square &lt;int&gt;,
#   num_closed_square &lt;int&gt;, raw_code &lt;chr&gt;, code &lt;chr&gt;, connector &lt;chr&gt;,
#   non_seq &lt;dbl&gt;, user &lt;lgl&gt;
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
    dplyr::mutate(open_curly = text == "{") %&gt;%  
    dplyr::mutate(closed_curly = text == "}") %&gt;%  
    dplyr::mutate(open_square = text == "[") %&gt;%  
    dplyr::mutate(open_square = ifelse(text == "[[", 2, open_square)) %&gt;%  
    dplyr::mutate(closed_square = text == "]") %&gt;%  
    dplyr::group_by(line) %&gt;%  
    dplyr::summarise(  
      full_line = paste0(text, collapse = ""),  
      comment = stringr::str_trim(paste0(ifelse(token == "COMMENT", text, ""),  
                                         collapse = " ")),  
      num_open_par = sum(open_par),  
      num_closed_par = sum(closed_par),  
      num_open_curly = sum(open_curly),  
      num_closed_curly = sum(closed_curly),  
      num_open_square = sum(open_square),  
      num_closed_square = sum(closed_square)  
              ) %&gt;%  
    dplyr::left_join(raw_code_table) %&gt;%  
    dplyr::mutate(code = ifelse(comment != "", stringr::str_remove(raw_code, comment), raw_code)) %&gt;%  
    dplyr::mutate(connector = stringr::str_extract(stringr::str_trim(code), "%&gt;%$|\\+$|-&gt;$|%\\+%")) %&gt;%  
    dplyr::mutate(connector = tidyr::replace_na(connector, "")) %&gt;%  
    dplyr::mutate(non_seq = stringr::str_extract(comment, "#REVEAL-?\\d+")) %&gt;%  
    dplyr::mutate(non_seq = stringr::str_extract(non_seq, "-?\\d+")) %&gt;%  
    dplyr::mutate(non_seq = as.numeric(non_seq)) %&gt;%  
    dplyr::mutate(non_seq = tidyr::replace_na(non_seq, 1)) %&gt;%  
    dplyr::mutate(comment = stringr::str_remove(comment, "#REVEAL\\d+")) %&gt;%  
    dplyr::mutate(user = stringr::str_detect(comment, "#REVEAL")) %&gt;%  
    dplyr::mutate(comment = stringr::str_remove(comment, "#REVEAL")) %&gt;%  
    dplyr::mutate(code = stringr::str_remove(stringi::stri_trim_right(code), "%&gt;%$|\\+$|-&gt;$|%\\+%")) %&gt;%  
*   dplyr::mutate(balanced_paren = (cumsum(num_open_par) - cumsum(num_closed_par)) == 0)
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
# A tibble: 14 x 15
    line full_line comment num_open_par num_closed_par num_open_curly
   &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;          &lt;int&gt;          &lt;int&gt;          &lt;int&gt;
 1     1 cars%&gt;%#… "# the…            0              0              0
 2     2 filter(s… "# sub…            1              1              0
 3     3 ggplot()… "# pip…            1              1              0
 4     4 aes(x=sp… ""                 1              1              0
 5     5 aes(y=di… ""                 1              1              0
 6     6 # Descri… "# Des…            0              0              0
 7     7 geom_poi… ""                 1              1              0
 8     8 geom_poi… ""                 1              1              0
 9     9 geom_jit… ""                 1              1              0
10    10 aes(colo… ""                 1              0              0
11    11 speed&gt;14  ""                 0              0              0
12    12 )%+%      ""                 0              1              0
13    13 cars-&gt;    ""                 0              0              0
14    14 my_plot#… ""                 0              0              0
# … with 9 more variables: num_closed_curly &lt;int&gt;, num_open_square &lt;int&gt;,
#   num_closed_square &lt;int&gt;, raw_code &lt;chr&gt;, code &lt;chr&gt;, connector &lt;chr&gt;,
#   non_seq &lt;dbl&gt;, user &lt;lgl&gt;, balanced_paren &lt;lgl&gt;
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
    dplyr::mutate(open_curly = text == "{") %&gt;%  
    dplyr::mutate(closed_curly = text == "}") %&gt;%  
    dplyr::mutate(open_square = text == "[") %&gt;%  
    dplyr::mutate(open_square = ifelse(text == "[[", 2, open_square)) %&gt;%  
    dplyr::mutate(closed_square = text == "]") %&gt;%  
    dplyr::group_by(line) %&gt;%  
    dplyr::summarise(  
      full_line = paste0(text, collapse = ""),  
      comment = stringr::str_trim(paste0(ifelse(token == "COMMENT", text, ""),  
                                         collapse = " ")),  
      num_open_par = sum(open_par),  
      num_closed_par = sum(closed_par),  
      num_open_curly = sum(open_curly),  
      num_closed_curly = sum(closed_curly),  
      num_open_square = sum(open_square),  
      num_closed_square = sum(closed_square)  
              ) %&gt;%  
    dplyr::left_join(raw_code_table) %&gt;%  
    dplyr::mutate(code = ifelse(comment != "", stringr::str_remove(raw_code, comment), raw_code)) %&gt;%  
    dplyr::mutate(connector = stringr::str_extract(stringr::str_trim(code), "%&gt;%$|\\+$|-&gt;$|%\\+%")) %&gt;%  
    dplyr::mutate(connector = tidyr::replace_na(connector, "")) %&gt;%  
    dplyr::mutate(non_seq = stringr::str_extract(comment, "#REVEAL-?\\d+")) %&gt;%  
    dplyr::mutate(non_seq = stringr::str_extract(non_seq, "-?\\d+")) %&gt;%  
    dplyr::mutate(non_seq = as.numeric(non_seq)) %&gt;%  
    dplyr::mutate(non_seq = tidyr::replace_na(non_seq, 1)) %&gt;%  
    dplyr::mutate(comment = stringr::str_remove(comment, "#REVEAL\\d+")) %&gt;%  
    dplyr::mutate(user = stringr::str_detect(comment, "#REVEAL")) %&gt;%  
    dplyr::mutate(comment = stringr::str_remove(comment, "#REVEAL")) %&gt;%  
    dplyr::mutate(code = stringr::str_remove(stringi::stri_trim_right(code), "%&gt;%$|\\+$|-&gt;$|%\\+%")) %&gt;%  
    dplyr::mutate(balanced_paren = (cumsum(num_open_par) - cumsum(num_closed_par)) == 0) %&gt;%  
*   dplyr::mutate(balanced_curly = (cumsum(num_open_curly) - cumsum(num_closed_curly)) == 0)
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
# A tibble: 14 x 16
    line full_line comment num_open_par num_closed_par num_open_curly
   &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;          &lt;int&gt;          &lt;int&gt;          &lt;int&gt;
 1     1 cars%&gt;%#… "# the…            0              0              0
 2     2 filter(s… "# sub…            1              1              0
 3     3 ggplot()… "# pip…            1              1              0
 4     4 aes(x=sp… ""                 1              1              0
 5     5 aes(y=di… ""                 1              1              0
 6     6 # Descri… "# Des…            0              0              0
 7     7 geom_poi… ""                 1              1              0
 8     8 geom_poi… ""                 1              1              0
 9     9 geom_jit… ""                 1              1              0
10    10 aes(colo… ""                 1              0              0
11    11 speed&gt;14  ""                 0              0              0
12    12 )%+%      ""                 0              1              0
13    13 cars-&gt;    ""                 0              0              0
14    14 my_plot#… ""                 0              0              0
# … with 10 more variables: num_closed_curly &lt;int&gt;, num_open_square &lt;int&gt;,
#   num_closed_square &lt;int&gt;, raw_code &lt;chr&gt;, code &lt;chr&gt;, connector &lt;chr&gt;,
#   non_seq &lt;dbl&gt;, user &lt;lgl&gt;, balanced_paren &lt;lgl&gt;, balanced_curly &lt;lgl&gt;
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
    dplyr::mutate(open_curly = text == "{") %&gt;%  
    dplyr::mutate(closed_curly = text == "}") %&gt;%  
    dplyr::mutate(open_square = text == "[") %&gt;%  
    dplyr::mutate(open_square = ifelse(text == "[[", 2, open_square)) %&gt;%  
    dplyr::mutate(closed_square = text == "]") %&gt;%  
    dplyr::group_by(line) %&gt;%  
    dplyr::summarise(  
      full_line = paste0(text, collapse = ""),  
      comment = stringr::str_trim(paste0(ifelse(token == "COMMENT", text, ""),  
                                         collapse = " ")),  
      num_open_par = sum(open_par),  
      num_closed_par = sum(closed_par),  
      num_open_curly = sum(open_curly),  
      num_closed_curly = sum(closed_curly),  
      num_open_square = sum(open_square),  
      num_closed_square = sum(closed_square)  
              ) %&gt;%  
    dplyr::left_join(raw_code_table) %&gt;%  
    dplyr::mutate(code = ifelse(comment != "", stringr::str_remove(raw_code, comment), raw_code)) %&gt;%  
    dplyr::mutate(connector = stringr::str_extract(stringr::str_trim(code), "%&gt;%$|\\+$|-&gt;$|%\\+%")) %&gt;%  
    dplyr::mutate(connector = tidyr::replace_na(connector, "")) %&gt;%  
    dplyr::mutate(non_seq = stringr::str_extract(comment, "#REVEAL-?\\d+")) %&gt;%  
    dplyr::mutate(non_seq = stringr::str_extract(non_seq, "-?\\d+")) %&gt;%  
    dplyr::mutate(non_seq = as.numeric(non_seq)) %&gt;%  
    dplyr::mutate(non_seq = tidyr::replace_na(non_seq, 1)) %&gt;%  
    dplyr::mutate(comment = stringr::str_remove(comment, "#REVEAL\\d+")) %&gt;%  
    dplyr::mutate(user = stringr::str_detect(comment, "#REVEAL")) %&gt;%  
    dplyr::mutate(comment = stringr::str_remove(comment, "#REVEAL")) %&gt;%  
    dplyr::mutate(code = stringr::str_remove(stringi::stri_trim_right(code), "%&gt;%$|\\+$|-&gt;$|%\\+%")) %&gt;%  
    dplyr::mutate(balanced_paren = (cumsum(num_open_par) - cumsum(num_closed_par)) == 0) %&gt;%  
    dplyr::mutate(balanced_curly = (cumsum(num_open_curly) - cumsum(num_closed_curly)) == 0) %&gt;%  
*   dplyr::mutate(balanced_square = (cumsum(num_open_square) - cumsum(num_closed_square)) == 0)
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
# A tibble: 14 x 17
    line full_line comment num_open_par num_closed_par num_open_curly
   &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;          &lt;int&gt;          &lt;int&gt;          &lt;int&gt;
 1     1 cars%&gt;%#… "# the…            0              0              0
 2     2 filter(s… "# sub…            1              1              0
 3     3 ggplot()… "# pip…            1              1              0
 4     4 aes(x=sp… ""                 1              1              0
 5     5 aes(y=di… ""                 1              1              0
 6     6 # Descri… "# Des…            0              0              0
 7     7 geom_poi… ""                 1              1              0
 8     8 geom_poi… ""                 1              1              0
 9     9 geom_jit… ""                 1              1              0
10    10 aes(colo… ""                 1              0              0
11    11 speed&gt;14  ""                 0              0              0
12    12 )%+%      ""                 0              1              0
13    13 cars-&gt;    ""                 0              0              0
14    14 my_plot#… ""                 0              0              0
# … with 11 more variables: num_closed_curly &lt;int&gt;, num_open_square &lt;int&gt;,
#   num_closed_square &lt;int&gt;, raw_code &lt;chr&gt;, code &lt;chr&gt;, connector &lt;chr&gt;,
#   non_seq &lt;dbl&gt;, user &lt;lgl&gt;, balanced_paren &lt;lgl&gt;, balanced_curly &lt;lgl&gt;,
#   balanced_square &lt;lgl&gt;
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
    dplyr::mutate(open_curly = text == "{") %&gt;%  
    dplyr::mutate(closed_curly = text == "}") %&gt;%  
    dplyr::mutate(open_square = text == "[") %&gt;%  
    dplyr::mutate(open_square = ifelse(text == "[[", 2, open_square)) %&gt;%  
    dplyr::mutate(closed_square = text == "]") %&gt;%  
    dplyr::group_by(line) %&gt;%  
    dplyr::summarise(  
      full_line = paste0(text, collapse = ""),  
      comment = stringr::str_trim(paste0(ifelse(token == "COMMENT", text, ""),  
                                         collapse = " ")),  
      num_open_par = sum(open_par),  
      num_closed_par = sum(closed_par),  
      num_open_curly = sum(open_curly),  
      num_closed_curly = sum(closed_curly),  
      num_open_square = sum(open_square),  
      num_closed_square = sum(closed_square)  
              ) %&gt;%  
    dplyr::left_join(raw_code_table) %&gt;%  
    dplyr::mutate(code = ifelse(comment != "", stringr::str_remove(raw_code, comment), raw_code)) %&gt;%  
    dplyr::mutate(connector = stringr::str_extract(stringr::str_trim(code), "%&gt;%$|\\+$|-&gt;$|%\\+%")) %&gt;%  
    dplyr::mutate(connector = tidyr::replace_na(connector, "")) %&gt;%  
    dplyr::mutate(non_seq = stringr::str_extract(comment, "#REVEAL-?\\d+")) %&gt;%  
    dplyr::mutate(non_seq = stringr::str_extract(non_seq, "-?\\d+")) %&gt;%  
    dplyr::mutate(non_seq = as.numeric(non_seq)) %&gt;%  
    dplyr::mutate(non_seq = tidyr::replace_na(non_seq, 1)) %&gt;%  
    dplyr::mutate(comment = stringr::str_remove(comment, "#REVEAL\\d+")) %&gt;%  
    dplyr::mutate(user = stringr::str_detect(comment, "#REVEAL")) %&gt;%  
    dplyr::mutate(comment = stringr::str_remove(comment, "#REVEAL")) %&gt;%  
    dplyr::mutate(code = stringr::str_remove(stringi::stri_trim_right(code), "%&gt;%$|\\+$|-&gt;$|%\\+%")) %&gt;%  
    dplyr::mutate(balanced_paren = (cumsum(num_open_par) - cumsum(num_closed_par)) == 0) %&gt;%  
    dplyr::mutate(balanced_curly = (cumsum(num_open_curly) - cumsum(num_closed_curly)) == 0) %&gt;%  
    dplyr::mutate(balanced_square = (cumsum(num_open_square) - cumsum(num_closed_square)) == 0) %&gt;%  
*   dplyr::mutate(auto = balanced_paren &amp; balanced_curly &amp; balanced_square &amp;
*            code != "")
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
# A tibble: 14 x 18
    line full_line comment num_open_par num_closed_par num_open_curly
   &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;          &lt;int&gt;          &lt;int&gt;          &lt;int&gt;
 1     1 cars%&gt;%#… "# the…            0              0              0
 2     2 filter(s… "# sub…            1              1              0
 3     3 ggplot()… "# pip…            1              1              0
 4     4 aes(x=sp… ""                 1              1              0
 5     5 aes(y=di… ""                 1              1              0
 6     6 # Descri… "# Des…            0              0              0
 7     7 geom_poi… ""                 1              1              0
 8     8 geom_poi… ""                 1              1              0
 9     9 geom_jit… ""                 1              1              0
10    10 aes(colo… ""                 1              0              0
11    11 speed&gt;14  ""                 0              0              0
12    12 )%+%      ""                 0              1              0
13    13 cars-&gt;    ""                 0              0              0
14    14 my_plot#… ""                 0              0              0
# … with 12 more variables: num_closed_curly &lt;int&gt;, num_open_square &lt;int&gt;,
#   num_closed_square &lt;int&gt;, raw_code &lt;chr&gt;, code &lt;chr&gt;, connector &lt;chr&gt;,
#   non_seq &lt;dbl&gt;, user &lt;lgl&gt;, balanced_paren &lt;lgl&gt;, balanced_curly &lt;lgl&gt;,
#   balanced_square &lt;lgl&gt;, auto &lt;lgl&gt;
```
]]
---
class: split-40
count: false
.column[.content[

```r
code &lt;- flipbookr:::create_code()  
  sf &lt;- srcfile(code)  
  try(parse(text = code, srcfile = sf))  
  utils::getParseData(sf) %&gt;%  
    dplyr::rename(line = line1) %&gt;%  
    dplyr::mutate(open_par = text == "(") %&gt;%  
    dplyr::mutate(closed_par = text == ")") %&gt;%  
    dplyr::mutate(open_curly = text == "{") %&gt;%  
    dplyr::mutate(closed_curly = text == "}") %&gt;%  
    dplyr::mutate(open_square = text == "[") %&gt;%  
    dplyr::mutate(open_square = ifelse(text == "[[", 2, open_square)) %&gt;%  
    dplyr::mutate(closed_square = text == "]") %&gt;%  
    dplyr::group_by(line) %&gt;%  
    dplyr::summarise(  
      full_line = paste0(text, collapse = ""),  
      comment = stringr::str_trim(paste0(ifelse(token == "COMMENT", text, ""),  
                                         collapse = " ")),  
      num_open_par = sum(open_par),  
      num_closed_par = sum(closed_par),  
      num_open_curly = sum(open_curly),  
      num_closed_curly = sum(closed_curly),  
      num_open_square = sum(open_square),  
      num_closed_square = sum(closed_square)  
              ) %&gt;%  
    dplyr::left_join(raw_code_table) %&gt;%  
    dplyr::mutate(code = ifelse(comment != "", stringr::str_remove(raw_code, comment), raw_code)) %&gt;%  
    dplyr::mutate(connector = stringr::str_extract(stringr::str_trim(code), "%&gt;%$|\\+$|-&gt;$|%\\+%")) %&gt;%  
    dplyr::mutate(connector = tidyr::replace_na(connector, "")) %&gt;%  
    dplyr::mutate(non_seq = stringr::str_extract(comment, "#REVEAL-?\\d+")) %&gt;%  
    dplyr::mutate(non_seq = stringr::str_extract(non_seq, "-?\\d+")) %&gt;%  
    dplyr::mutate(non_seq = as.numeric(non_seq)) %&gt;%  
    dplyr::mutate(non_seq = tidyr::replace_na(non_seq, 1)) %&gt;%  
    dplyr::mutate(comment = stringr::str_remove(comment, "#REVEAL\\d+")) %&gt;%  
    dplyr::mutate(user = stringr::str_detect(comment, "#REVEAL")) %&gt;%  
    dplyr::mutate(comment = stringr::str_remove(comment, "#REVEAL")) %&gt;%  
    dplyr::mutate(code = stringr::str_remove(stringi::stri_trim_right(code), "%&gt;%$|\\+$|-&gt;$|%\\+%")) %&gt;%  
    dplyr::mutate(balanced_paren = (cumsum(num_open_par) - cumsum(num_closed_par)) == 0) %&gt;%  
    dplyr::mutate(balanced_curly = (cumsum(num_open_curly) - cumsum(num_closed_curly)) == 0) %&gt;%  
    dplyr::mutate(balanced_square = (cumsum(num_open_square) - cumsum(num_closed_square)) == 0) %&gt;%  
    dplyr::mutate(auto = balanced_paren &amp; balanced_curly &amp; balanced_square &amp;  
             code != "") %&gt;%  
*   dplyr::select(line, raw_code, code, connector, comment, auto, user, non_seq)
```
]]
.column[.content[

```
expression(&lt;srcref: file "cars %&gt;%             # the data  #REVEAL
  filter(speed &gt; 4) %&gt;%  # subset
  ggplot() +              # pipe to ggplot
  aes(x = speed) +
  aes(y = dist) +
  # Describing what follows
  geom_point(alpha = .3) + #REVEAL
  geom_point(alpha = 1) + #REVEAL2
  geom_jitter(alpha = .5) + #REVEAL3
  aes(color =
  speed &gt; 14
  ) %+%
  cars -&gt;
  my_plot  #REVEAL" chars 1:1 to 14:9&gt;)
```

```
# A tibble: 14 x 8
    line raw_code          code        connector comment     auto  user  non_seq
   &lt;int&gt; &lt;chr&gt;             &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;       &lt;lgl&gt; &lt;lgl&gt;   &lt;dbl&gt;
 1     1 "cars %&gt;%       … "cars "     "%&gt;%"     "# the dat… TRUE  TRUE        1
 2     2 "  filter(speed … "  filter(… "%&gt;%"     "# subset"  TRUE  FALSE       1
 3     3 "  ggplot() +   … "  ggplot(… "+"       "# pipe to… TRUE  FALSE       1
 4     4 "  aes(x = speed… "  aes(x =… "+"       ""          TRUE  FALSE       1
 5     5 "  aes(y = dist)… "  aes(y =… "+"       ""          TRUE  FALSE       1
 6     6 "  # Describing … ""          ""        "# Describ… FALSE FALSE       1
 7     7 "  geom_point(al… "  geom_po… "+"       ""          TRUE  TRUE        1
 8     8 "  geom_point(al… "  geom_po… "+"       ""          TRUE  FALSE       2
 9     9 "  geom_jitter(a… "  geom_ji… "+"       ""          TRUE  FALSE       3
10    10 "  aes(color ="   "  aes(col… ""        ""          FALSE FALSE       1
11    11 "  speed &gt; 14"    "  speed &gt;… ""        ""          FALSE FALSE       1
12    12 "  ) %+%"         "  ) "      "%+%"     ""          TRUE  FALSE       1
13    13 "  cars -&gt;"       "  cars "   "-&gt;"      ""          TRUE  FALSE       1
14    14 "  my_plot  #REV… "  my_plot" ""        ""          TRUE  TRUE        1
```
]]





&lt;style type="text/css"&gt;
.remark-code{line-height: 1.5; font-size: 60%}
&lt;/style&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:10",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
